/*=====GENERATING: 15.10.2017 21:10:20=======*/;
;/*========== INCLUDE @Utils/Utils========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.U?false:initPlugin()
function initPlugin(){var C=0,FN=0,U={},SW=null,EFO=window.Eve.EFO,SWH=null
function functionUID(){return'F'+(++FN)}
function UID(xp){xp&&typeof xp==='string'&&xp.length?false:xp='uid_';return xp+(++C)}
function RUID(xp){xp&&typeof xp==='string'&&xp.length?false:xp='uid_';return xp+C}
function isCallable(x){return x&&typeof x==='function'?true:false}
function isObject(x){return x&&typeof x==='object'?true:false}
function isArray(x){return isObject(x)&&(x instanceof Array)?true:false}
function safeArray(x){return isArray(x)?x:[]}
function safeObject(x){return isObject(x)?x:{}}
function isError(x){return U.isObject(x)&&(x instanceof Error)?true:false}
function isDOM(x){return(isObject(x)&&(x instanceof HTMLElement))}
function isJQuery(x){return(isObject(x)&&(window.jQuery)&&(x instanceof jQuery))}
function safeError(x){if(isError(x))return x;try{return new Error(x.toString())}catch(e){return e}}
function normalizeConstructor(x){if(isCallable(x)){x.is=function(xx){return isObject(xx)&&(xx instanceof x)?true:false};x.F=function(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,xx,y,w,v,z){return new x(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,xx,y,w,v,z)}};return x}
function bindTo(obj,func){if(!isCallable(func))throw new Error("bind of non callable");if(!isObject(obj))throw new Error("bind to non object");if(!isCallable(func._Eve_EFO_getFUID))throw new Error("First generation function - cant bind");isObject(obj._Eve_EFO_binds)?false:obj._Eve_EFO_binds={};(func._Eve_EFO_getFUID()in obj._Eve_EFO_binds)?false:obj._Eve_EFO_binds[func._Eve_EFO_getFUID()]=function(){return func.apply(obj,Array.prototype.slice.call(arguments))};return obj._Eve_EFO_binds[func._Eve_EFO_getFUID()]}
function bindToWP(obj,func){if(!isCallable(func))throw new Error("bind of non callable");if(!isObject(obj))throw new Error("bind to non object");if(!isCallable(func._Eve_EFO_getFUID))throw new Error("First generation function - cant bind");isObject(obj._Eve_EFO_bindsp)?false:obj._Eve_EFO_bindsp={};(func._Eve_EFO_getFUID()in obj._Eve_EFO_bindsp)?false:obj._Eve_EFO_bindsp[func._Eve_EFO_getFUID()]=function(){return func.apply(obj,[this].concat(Array.prototype.slice.call(arguments)))};return obj._Eve_EFO_bindsp[func._Eve_EFO_getFUID()]}
function objectCreate2(COP){if(!isCallable(COP))throw new Error("invalid object create call:need function")
function F(){};F.prototype=COP.prototype;var ro=new F();return ro}
function initMixines(x){if(isCallable(x)){var mixs=isArray(x.mixines)?x.mixines:[];x.prototype.mixinesToInit=[];for(var i=0;i<mixs.length;i++){var mixc=U.getItemOnPath(EFO.Mixines,mixs[i],null);if(isCallable(mixc)){for(var k in mixc.prototype)if(mixc.prototype.hasOwnProperty(k)&&isCallable(mixc.prototype[k]))k==='init'?false:x.prototype[k]=mixc.prototype[k];x.prototype.mixinesToInit.push(mixc.prototype.init)}}};return x}
function ScrollWidthDetector(){return ScrollWidthDetector.is(SWH)?SWH:ScrollWidthDetector.is(this)?this.init():ScrollWidthDetector.F()};normalizeConstructor(ScrollWidthDetector);ScrollWidthDetector.prototype._w=null;ScrollWidthDetector.prototype.init=function(){SWH=this;return this};ScrollWidthDetector.prototype.get=function(){if(this._w===null)this.measure();return this._w};ScrollWidthDetector.prototype.mesaure=function(){var div=document.createElement('div');div.style.width="100px";div.style.height="100px";div.style.overflow="auto";div.style.position="absolute";div.style.top="-5000";div.style.left="-5000";var div2=document.createElement('div');div2.style.height="200px";div.appendChild(div2);this.getBody().appendChild(div);var delta=div.offsetWidth-div2.offsetWidth;div.remove();div=null;this._w=EFO.U.FloatMoreEqOr(delta,0,0);return this._w};ScrollWidthDetector.prototype.getBody=function(){var b=document.getElementsByTagName('body');return b&&b.length?b[0]:document.documentElement}
function mkArray(input,unique,separator){separator=U.defined(separator)?separator:',';unique=U.anyBool(unique,true);if(isArray(input))return input;if(U.NEString(input,'')){var inputA=safeArray(input.split(separator)),uq=unique?{}:null,o=[];for(var i=0;i<inputA.length;i++){var t=U.NEString(inputA[i],false);if(t&&(!unique||!(t in uq))){o.push(t);unique?uq[t]=t:false}};return o};return[]};U.UID=UID;U.RUID=RUID;U.isObject=isObject;U.isArray=isArray;U.safeArray=safeArray;U.safeObject=safeObject;U.isCallable=isCallable;U.bindTo=bindTo;U.initMixines=initMixines;U.isError=isError;U.fixCon=U.FixCon=U.fixConstructor=U.normalizeConstructor=normalizeConstructor;U.safeError=safeError;U.isDOM=U.isDom=isDOM;U.isJQuery=U.isJquery=U.isjQuery=isJQuery;U.mkArray=mkArray;U.defined=function(x){return typeof x==='undefined'?false:true};U.coalesceDefined=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(this.defined(args[i]))return args[i];return void(0)};U.coalesce=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(this.defined(args[i])&&args[i]!==null)return args[i];return null};U.anyBool=function(x,def){def=this.defined(def)?def:false;if(x===1||x==='1'||x===true||x==='true'||x==='on')return true;if(x===0||x==='0'||x===false||x==='false'||x==='off')return false;try{if(x.toLowerCase()==='true'||x.toLowerCase()==='on')return true;if(x.toLowerCase()==='false'||x.toLowerCase()==='off')return false}catch(e){};return def};U.isInt=function(x){var r=parseInt(x);return typeof r==='number'&&!isNaN(r)?true:false};U.IntOr=function(test,def){def=this.defined(def)?def:null;var t=parseInt(test);return typeof t==='number'&&!isNaN(t)?t:def};U.IntMoreOr=function(test,more,def){def=this.defined(def)?def:null;more=this.IntOr(more,0);var result=this.IntOr(test,def);return this.isInt(result)&&result>more?result:def};U.NEString=function(x,def){def=this.defined(def)?def:null;var test=null;if(!typeof x==='string'){try{test=x.toString()}catch(e){return def}}else test=x;test=this.trim(test);return test&&test.length?test:def};U.FloatMoreOr=function(x,more,def){def=this.defined(def)?def:null;x=parseFloat(U.prepareFloat(x));return(typeof x==='number'&&!isNaN(x)&&x>more)?x:def};U.FloatMoreEqOr=function(x,more,def){def=this.defined(def)?def:null;x=parseFloat(this.prepareFloat(x));return(typeof x==='number'&&!isNaN(x)&&x>=more)?x:def};U.FloatOr=function(x,def){def=this.coalesceDefined(def,null);var test=parseFloat(this.prepareFloat(x));return typeof test==='number'&&!isNaN(test)?test:def};U.prepareFloat=function(x){try{return x.toString().replace(/\s/g,'').replace(/\,/g,'.')}catch(e){};return x};U.UCFirst=function(x){if(!(typeof x==='string'))try{x=x.toString()}catch(e){return x};var xa=x.split('');return[xa.slice(0,1).join('').toUpperCase(),xa.slice(1).join('')].join('')};U.trim=function(x){if(typeof x!=='string')try{return x.toString().trim()}catch(e){return''};return x.trim()};U.padLeft=function(w,l,f){try{var s=w.toString().split('');f=this.defined(f)?f:' ';while(s.length<l)s=[f].concat(s);return s.join('')}catch(e){};return w};U.padRight=function(w,l,f){try{var s=w.toString().split('');f=this.defined(f)?f:' ';while(s.length<l)s.push(f);return s.join('')}catch(e){};return w};U.parseSQLDateTime=function(x,def){def=this.defined(def)?def:null;try{var rx=/^\s{0,}(\d{2,4})-(\d{1,2})-(\d{1,2})(?:\s{0,}(\d{1,2})(?:\s{0,}:\s{0,}(\d{1,2})(?:\s{0,}:\s{0,}(\d{1,2})){0,1}){0,1}){0,1}$/,m=rx.exec(x);if(m){var D=new Date();D.setFullYear(parseInt(m[1]),parseInt(m[2])-1,parseInt(m[3]));D.setHours(this.IntMoreOr(m[4],0,0),this.IntMoreOr(m[5],0,0),this.IntMoreOr(m[6],0,0));return D}else return def}catch(e){};return def};U.scan=function(h,w){var R={};if(window.jQuery&&isCallable(window.jQuery)&&(h instanceof window.jQuery))h.find('[data-'+w+']').each(function(){var T=jQuery(this),N=U.NEString(T.data(w));N?R[N]=T:false});return R};U.scanFull=function(h,w){var R={};if(window.jQuery&&isCallable(window.jQuery)&&(h instanceof window.jQuery))h.find('[data-'+w+']').each(function(){var T=jQuery(this),N=U.NEString(T.data(w));N?R[N]=(R[N]?R[N].add(T):T):false});return R};U.hasProp=function(x,prp){prp=this.NEString(prp,null);return(this.isObject(x)&&prp&&(prp in x))?true:false};U.getProp=function(x,prp,def){def=this.coalesceDefined(def,null);return this.hasProp(x,prp)?x[prp]:def};U.path_exists=function(from,path){var spath=this.NEString(path,'').split('.');from=isObject(from)?from:null;if(!from||!spath.length)return false;var c=from;for(var i=0;i<spath.length-1;i++){if(U.isObject(c)&&this.NEString(spath[i])&&U.isObject(c[spath[i]])){c=c[spath[i]];continue};return false};var sp=this.NEString(spath[spath.length-1],null);return(U.isObject(c)&&sp&&U.hasProp(c,sp))?true:false};U.getItemOnPath=function(from,path,def){def=this.coalesceDefined(def,null);var spath=this.NEString(path,'').split('.');from=isObject(from)?from:null;if(!from||!spath.length)return def;var c=from;for(var i=0;i<spath.length-1;i++){if(U.isObject(c)&&this.NEString(spath[i])&&U.isObject(c[spath[i]])){c=c[spath[i]];continue};return def};var sp=this.NEString(spath[spath.length-1],null);return(U.isObject(c)&&sp&&U.hasProp(c,sp))?c[sp]:def};U.getItemOnPathGlobal=function(path,def){return this.getItemOnPath(window,path,def)};U.setItemOnPath=function(into,path,value){into=this.isObject(into)?into:null;var spath=this.NEString(path,'').split('.');if(!into||!spath.length)return;var c=into;for(var i=0;i<spath.length-1;i++){if(!this.NEString(spath[i],null)){this.THREAD_ERR("Invalid path:"+path);return};U.isObject(c[spath[i]])?false:c[spath[i]]={};c=c[spath[i]]};var sp=this.NEString(spath[spath.length-1],null);U.isObject(c)&&sp?c[sp]=value:this.THREAD_ERR("invalidPath:"+path)};U.getXpercentOfY=function(x,y){y=this.FloatOr(y,0);y=this.FloatOr(x,0);return(y/100)*x};U.getPercentsOfYisX=function(x,y){x=this.FloatOr(x,0);y=this.FloatOr(y,0);var pc1=Math.abs(y/100);return pc1===0?0:(Math.abs(x)/pc1)};U.getScrollWidth=function(){return ScrollWidthDetector().get()};U.AbstractError=function(){this.ERR("AbstractError")};U.ERR=function(message){throw new Error(message)};U.Error=function(x){if(isError(x))throw x;throw new Error(x)};U.TError=function(x){isError(x)?this.THREAD_ERRO(x):this.THREAD_ERR(x)};U.THREAD_ERR=function(message){var x=new Error(message);window.setTimeout(function(){throw x},0)};U.THREAD_ERRO=function(x){if(this.isObject(x)&&(x instanceof Error))window.setTimeout(function(){throw x},0)};Object.defineProperty(Function.prototype,'_Eve_EFO_getFUID',{enumerable:false,configurable:false,writable:false,value:function(){this._Eve_EFO_FUID?false:this._Eve_EFO_FUID=functionUID();return this._Eve_EFO_FUID}});Object.defineProperty(Object.prototype,'_Eve_EFO_binds',{enumerable:false,configurable:false,writable:true,value:null});Object.defineProperty(Function.prototype,'bindToObject',{enumerable:false,configurable:false,writable:false,value:function(o){return bindTo(o,this)}});Object.defineProperty(Function.prototype,'bindToObjectWParam',{enumerable:false,configurable:false,writable:false,value:function(o){return bindToWP(o,this)}});Object.defineProperty(Function.prototype,'xInherit',{enumerable:false,configurable:false,writable:false,value:function(superFunc){this.prototype=objectCreate2(superFunc);this.prototype.constructor=this;return this}});Object.defineProperty(Function.prototype,'xInheritE',{enumerable:false,configurable:false,writable:false,value:function(superFunc){this.prototype=objectCreate2(superFunc);this.prototype.constructor=this;return normalizeConstructor(this)}});window.Eve.EFO.U=U}})();
;/*========== INCLUDE @Utils/Checks========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Checks?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,T={clearDigits:function(x){try{return x.toString().replace(/\D/g,'')}catch(e){};return null},formatPhone:function(x){var y=this.clearDigits(x);try{var m=/^(\d{1,})(\d{3})(\d{3})(\d{2})(\d{2})$/.exec(y.toString());if(m)return['+',m[1],' (',m[2],') ',m.slice(3).join(' ')].join('')}catch(e){};return null},tryFormatPhone:function(x){var y=this.formatPhone(x);return y?y:x},isEmail:function(x){try{return/^[^@]{1,}@[^@]{1,}\.[^@\.]{1,}$/.test(x.toString())}catch(e){};return false},formatAccountNumber:function(x){try{var y=this.clearDigits(x),m=/^(\d{5})(\d{5})(\d{5})(\d{5})$/.exec(y.toString());return m?m.slice(1).join(' '):x}catch(e){};return x},isAccountNumber:function(x){try{var y=this.clearDigits(x),m=/^(\d{5})(\d{5})(\d{5})(\d{5})$/.exec(y.toString());return m?m.slice(1).join(' '):false}catch(e){};return false},prepareFloat:function(x){try{return x.toString().replace(/\s/g,'').replace(/\,/g,'.')}catch(e){};return x},formatPrice:function(num,dec){dec=U.IntMoreOr(dec,0,2);var val=parseFloat(this.prepareFloat(num));val=typeof val==='number'&&!isNaN(val)?val:0;return val.toFixed(dec).toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,'$1 ')},formatBic:function(x){try{var y=this.clearDigits(x),m=/^(\d{3})(\d{3})(\d{3})$/.exec(y.toString());return m?m.slice(1).join(' '):x}catch(e){return x}},isBIC:function(x){try{var y=this.clearDigits(x),m=/^(\d{3})(\d{3})(\d{3})$/.exec(y.toString());return m?m.slice(1).join(' '):false}catch(e){};return false},formatINN:function(x){try{var y=this.clearDigits(x);if(y.length===10){return this.checkINN10(y)}else if(y.length===12)return this.checkINN12(y)}catch(e){};return null},checkINN10:function(y){if(y.length==10){var ld=parseInt(y[9]),dd=[],ch=[2,4,10,3,5,9,4,6,8],crc=0;for(var i=0;i<9;i++)crc+=parseInt(y[i])*ch[i];crc=(crc%11)%10;return(crc==ld)?this.formatInn10(y):null};return null},checkINN12:function(y){if(y.length==12){var ld12=parseInt(y[11]),ld11=parseInt(y[10]),ch1=[7,2,4,10,3,5,9,4,6,8],ch2=[3,7,2,4,10,3,5,9,4,6,8],crc1=0,crc2=0;for(var i=0;i<11;i++){crc1+=i<10?parseInt(y[i])*ch1[i]:0;crc2+=parseInt(y[i])*ch2[i]};crc1=(crc1%11)%10;crc2=(crc2%11)%10;return(crc1==ld11&&crc2==ld12)?this.formatInn12(y):null};return null},formatInn10:function(y){var m=/^(\d{5})(\d{5})$/.exec(y);return m?m.slice(1).join(' '):null},formatInn12:function(y){var m=/^(\d{4})(\d{4})(\d{4})$/.exec(y);return m?m.slice(1).join(' '):null}};EFO.Checks=T}})();
;/*========== INCLUDE @Utils/TemplateManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.TemplateManager?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,T={}
function F(){return F.is(H)?H:(F.is(this)?this.init():F.F())};U.normalizeConstructor(F);F.prototype.base_url=null;F.prototype.init=function(){T={};H=this;return this};F.prototype.add=function(name,tpl,prefix){var key=this.prepareKey(name,prefix);T[key]=tpl;return this};F.prototype.addObject=function(x,prefix){if(U.isObject(x))for(var k in x)if(x.hasOwnProperty(k)&&(typeof(x[k])==='string'||U.isObject(x[k]))){var key=this.prepareKey(k,prefix);T[key]=x[k]};return this};F.prototype.exists=function(x,prefix){try{var key=this.prepareKey(x,prefix);return(key in T)?true:false}catch(e){U.THREAD_ERRO(e);return false}};F.prototype.prepareKey=function(name,prefix){prefix=U.NEString(prefix,null);return(prefix?[prefix,name].join('.'):name).toLowerCase()};F.prototype.prepareTemplate=function(key){var ta=T[key];if(ta.k&&ta.c&&U.isArray(ta.k)){T[key]=this._runpreparer(ta.k,ta.c);return T[key]};return'Error prepare template'};F.prototype._runpreparer=function(keys,content){var mid=this._runVoc(keys,content);return this._runRle(mid)};F.prototype._runVoc=function(ka,c){var keys=this.prpepareKeysVocDec();return c.replace(/\f(.)/,function(n,w){U.IntMoreOr(w,-1,null)!==null?w=["s",w].join(''):false;return ka[keys[w]]})};F.prototype._runRle=function(mid){var keys=this.prepareRleKeys(),self=this;return mid.replace(/\b(.)(.)/,function(w,l,r){return self.strrep(l,keys[r])})};F.prototype.prepareRleKeys=function(){if(!this._rleKeys){var sk=this.prepareLinearKeys();this._rleKeys={};for(var i=0;i<sk.length;i++){var key=sk[i];U.IntMoreOr(key,-1,null)!==null?key=["s",key].join(''):false;this._rleKeys[key]=i+4}};return this._rleKeys};F.prototype.strrep=function(x,co){var t=[];for(var i=0;i<co;i++)t.push(x);return t.join('')};F.prototype.prepareLinearKeys=function(){if(!this._linearKeys){var s='abcdefghijklmnopqrstuvwxyz';s+=s.toUpperCase();s+='!@#$%^&*()_+={[}]|?.,:;<>~`1234567890';this._linearKeys=s.split('')};return this._linearKeys};F.prototype.prepareKeysVocDec=function(){if(!this._vocKeys){var $lin=this.prepareLinearKeys();this._vocKeys={};for(var i=0;i<$lin.length;i++){var k=$lin[i];U.IntMoreOr(k,-1,null)!==null?k=["s",k].join(''):false;this._vocKeys[k]=i}};return this._vocKeys};F.prototype.get=function(name,prefix){try{var key=this.prepareKey(name,prefix);if(key in T){if(U.isObject(T[key]))this.prepareTemplate(key);return T[key]};U.THREAD_ERR("No template: "+name);return''}catch(e){U.THREAD_ERRO(e)};return''};F.prototype.obsoleteget=function(name,prefix){try{var key=this.prepareKey(name,prefix);if(key in T)return T[key];U.THREAD_ERR("No template: "+name);return''}catch(e){U.THREAD_ERRO(e)};return''};F.prototype.setBaseUrl=function(x){this.base_url=U.NEString(x,null);return this};F.prototype.load=function(name){var R=jQuery.Deferred(),self=this.onBeginLoading();jQuery.get(this.base_url+name).done(function(d){self.onTemplateLoaded(name,d,R)}).fail(function(){self.onTemplateLoadFail(name,R)}).always(this.onEndLoading.bindToObject(this));return R};F.prototype.onTemplateLoaded=function(name,d,R){this.add(name,d);R.resolve(this);return this};F.prototype.onTemplateLoadFail=function(name,R){R.reject();U.THREAD_ERRO(new Error("Error loading template: "+name));return this};F.prototype.onBeginLoading=function(){EFO.GEM().Run('ON_AJAX_REQUEST_BEGIN','TemplateManager');return this};F.prototype.onEndLoading=function(){EFO.GEM().Run('ON_AJAX_REQUEST_END','TemplateManager');return this};F.prototype.prepareSubKey=function(x){var xs=x.split('.'),o=[];for(var i=0;i<xs.length;i++)o.push(U.UCFirst(xs[i]));return o.join('')};EFO.TemplateManager=F}})();
;/*========== INCLUDE @Utils/GP========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.GP?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,GP=null
function F(x){return F.is(H)?H:(F.is(this)?this.init(x):F.F(x))};U.normalizeConstructor(F);F.prototype.savePath=null;F.prototype.init=function(x){H=this;this.savePath=U.NEString(x,this.getLocationPath());return this.load()};F.prototype.getLocationPath=function(){var p=window.location.pathname;p=U.NEString(p,'default_location');p=['EFOGP',p.replace(/\\\//g,'.')].join(':');return p};F.prototype.load=function(){var AG=null;try{AG=JSON.parse(window.localStorage.getItem(this.savePath));AG=U.isObject(AG)?AG:null}catch(e){AG=null;U.THREAD_ERRO(e)};GP=U.isObject(AG)?AG:{};return this};F.prototype.save=function(){GP=U.isObject(GP)?GP:{};try{window.localStorage.setItem(this.savePath,JSON.stringify(GP))}catch(E){U.THREAD_ERRO(E)};return this};F.prototype.get=function(path,def){return U.getItemOnPath(GP,path,def)};F.prototype.setSave=function(path,val){return this.set(path,val).save()};F.prototype.set=function(path,val){U.setItemOnPath(GP,path,val);return this};EFO.GP=F}})();
;/*========== INCLUDE @Utils/GLEM========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Events=window.Eve.EFO.Events||{};window.Eve.EFO.Events.GEM?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,C=0
function EID(){return(++C)}
function F(){return F.is(H)?H:(F.is(this)?this.init():F.F())};U.normalizeConstructor(F);F.prototype.IX=null;F.prototype.init=function(){H=this;this.IX={};return this};F.prototype.On=function(en,co,ca){var ev=EV(en,co,ca);if(ev.isValid()){U.isArray(this.IX[ev.name])?false:this.IX[ev.name]=[];this.IX[ev.name].push(ev);return ev};return null};F.prototype.Off=function(x){var IX=this.IX,euid=null;if(EV.is(x)){euid=x.id}else euid=U.IntMoreOr(x);if(euid)for(var K in this.IX)if(this.IX.hasOwnProperty(K)&&U.isArray(IX[K])){var T=[];for(var i=0;i<IX[K].length;i++)if(IX[K][i].id!==euid)T.push(IX[K][i]);IX[K]=T};return this};F.prototype.Run=function(en){var IX=this.IX,EN=EV.PEN(en);if(EN&&IX.hasOwnProperty(EN)&&U.isArray(IX[EN])&&IX[EN].length){var args=Array.prototype.slice.call(arguments,1);for(var i=0;i<IX[EN].length;i++)try{IX[EN][i].run(args)}catch(e){U.THREAD_ERRO(e)}};return this};F.prototype.trigger=F.prototype.Trigger=F.prototype.run=F.prototype.Raise=F.prototype.raise=F.prototype.Run;F.prototype.ON=F.prototype.on=F.prototype.addListener=F.prototype.listener=F.prototype.Listener=F.prototype.onEvent=F.prototype.onevent=F.prototype.On;F.prototype.OFF=F.prototype.off=F.prototype.removeListener=F.prototype.offEvent=F.prototype.OffEvent=F.prototype.Off
function LEM(){return LEM.is(this)?this.init():LEM.F()};LEM.xInheritE(F);LEM.prototype.init=function(){this.IX={};return this}
function EV(en,co,ca){return EV.is(this)?this.init(en,co,ca):EV.F().init(en,co,ca)};U.normalizeConstructor(EV);EV.PEN=function(x){return U.NEString(x)};EV.prototype.id=null;EV.prototype.name=null;EV.prototype.ca=null;EV.prototype.co=null;EV.prototype.a=true;EV.prototype.init=function(en,co,ca){this.id=EID();this.name=EV.PEN(en);this.co=U.isObject(co)?co:null;this.ca=U.isCallable(ca)?ca:null;return this};EV.prototype.isValid=function(){return this.id&&this.name&&this.ca?true:false};EV.prototype.enable=function(){this.a=true;return this};EV.prototype.disable=function(){this.a=false;return this};EV.prototype.run=function(args){this.a&&U.isCallable(this.ca)?(this.ca.apply((U.isObject(this.co)?this.co:this),(U.isArray(args)?args:[]))):false;return this};F.isEvent=EV.is;F.Event=EV;LEM.isEvent=EV.is;LEM.Event=EV;EFO.Events.GEM=F;EFO.Events.LEM=LEM}})();
;/*========== INCLUDE @Utils/DnDManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.DnDManager?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null
function F(){return F.is(H)?H:F.is(this)?this.init():F.F()};U.normalizeConstructor(F);F.prototype.init=function(){H=this;this.LEM=EFO.Events.LEM();return this.setDragHandlers()};F.prototype._startX=null;F.prototype._startY=null;F.prototype._dragType=null;F.prototype._dragging=null;F.prototype._customData=null;F.prototype.clearSelection=function(){try{if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges)window.getSelection().removeAllRanges()}else if(document.selection)document.selection.empty()}catch(e){U.THREAD_ERRO(e)};return this};F.prototype.setDragHandlers=function(){jQuery(document).on('mousedown','.EFODraggable',this.onDragPreInit.bindToObject(this));return this};F.prototype.onDragPreInit=function(e){this._startX=e.pageX;this._startY=e.pageY;var element=jQuery(e.currentTarget);this._dragType=element.data('efodragtype');this._dragging=element;this._customData={};return this._dragType?this.runWatch(e):this};F.prototype.runWatch=function(e){jQuery(document).on('mousemove',this.checkDragStart.bindToObject(this));jQuery(document).on('mouseup',this.abortDragFull.bindToObject(this));return this.checkDragStart(e)};F.prototype.checkDragStart=function(e){var deltaX=Math.max(e.pageX,this._startX)-Math.min(e.pageX,this._startX),deltaY=Math.max(e.pageY,this._startY)-Math.min(e.pageY,this._startY),offset=Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));return(offset>15)?this.startDrag(e):this};F.prototype.startDrag=function(e){this.LEM.Run('ON_BEFORE_DRAG',this._dragType,this._dragging,this._customData,e);this.LEM.Run('ON_BEFORE_DRAG_'+this._dragType,this._dragging,this._customData,e);this.abortDragNE();this.helper?false:this.createHelper();this.helper.show();jQuery('body').addClass('EFODragNow');this.positeHelper(e);jQuery(document).on('mouseup','.EFODropTarget',this.dragged.bindToObject(this));jQuery(document).on('mouseup',this.abortDragFull.bindToObject(this));jQuery(document).on('mouseenter','.EFODropTarget',this.dragOver.bindToObject(this));jQuery(document).on('mouseleave','.EFODropTarget',this.dragLeave.bindToObject(this));jQuery(document).on('mousemove',this.positeHelper.bindToObject(this));return this};F.prototype.createHelper=function(){this.helper=jQuery(EFO.TemplateManager().get('draghelper'));this.helper.appendTo('body');return this};F.prototype.positeHelper=function(e){this.helper.css({left:e.pageX+5+'px',top:e.pageY+5+'px'});return this};F.prototype.abortDrag=function(){this.abortDragNE();jQuery('body').removeClass('EFODragNow');this.LEM.Run('ABORT_DRAG_'+this._dragType);return this};F.prototype.abortDragNE=function(){this.helper?this.helper.hide():false;jQuery(document).off('mouseup','.EFODropTarget',this.dragged.bindToObject(this));jQuery(document).off('mouseup',this.abortDragFull.bindToObject(this));jQuery(document).off('mousemove',this.positeHelper.bindToObject(this));jQuery(document).off('mousemove',this.checkDragStart.bindToObject(this));jQuery(document).off('mouseenter','.EFODropTarget',this.dragOver.bindToObject(this));jQuery(document).off('mouseleave','.EFODropTarget',this.dragLeave.bindToObject(this));return this};F.prototype.clearDragData=function(){this._dragType=null;this._dragging=null;this._customData=null;return this};F.prototype.abortDragFull=function(){return this.abortDrag().clearDragData()};F.prototype.dragOver=function(e){var T=jQuery(e.currentTarget).addClass('EFODragOver');this.LEM.Run('ON_DRAG_OVER',this,T,e);this.LEM.Run('ON_DRAG_OVER_'+this._dragType,this,T,e);return this};F.prototype.dragLeave=function(e){var T=jQuery(e.currentTarget).removeClass('EFODragOver');this.LEM.Run('ON_DRAG_LEAVE',this,T,e);this.LEM.Run('ON_DRAG_LEAVE_'+this._dragType,this,T,e);return this};F.prototype.dragged=function(e){var T=jQuery(e.currentTarget),target_types=T.data('efodroptypes'),ta=target_types.split(','),r={};for(var i=0;i<ta.length;i++)r[ta[i]]=ta[i];if(this._dragType&&(this._dragType in r)){this.LEM.Run('ON_DROPPED',this,T,e);this.LEM.Run('ON_DROPPED_'+this._dragType,this,T,e)};return this.abortDragFull()};EFO.DnDManager=F}})();
;/*========== INCLUDE @Utils/LoginMon========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.LoginMon?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null
function LoginMon(){return LoginMon.is(H)?H:(LoginMon.is(this)?this.init():LoginMon.F())};U.FixCon(LoginMon);var F=LoginMon;F.prototype.init=function(){var H=this;this.setup();return this};F.prototype.setup=function(){EFO.Request.getRequestOptions().addWrapper('AuthRqrd',this.onStatus,this);return this};F.prototype.onStatus=function(success,fail){this.handleStatus(success,fail);return this};F.prototype.handleStatus=function(success,fail){var self=this,ev=EFO.Events.GEM().On('LOGIN_SUCCESS',this,function(x){success(x);EFO.Events.GEM().Off(ev)});EFO.Com().com('DAP.login').done(function(x){x.show()}).fail(function(){U.TError(this._T("RequiredComponentFail"));fail()});return this};EFO.LoginMon=F}})();
;/*========== INCLUDE @Mixines/Mixine========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Mixine?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};U.normalizeConstructor(F);M.Mixine=F}})();
;/*========== INCLUDE @Mixines/Commandable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Commandable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.on('click','[data-command]',this.onCommand.bindToObject(this));return this};F.prototype.onCommand=function(e){var T=jQuery(e.currentTarget),cmd=U.NEString(T.data('command'));if(cmd){var fn=['onCommand',U.UCFirst(cmd)].join('');if(U.isCallable(this[fn]))try{e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;this[fn].apply(this,[T,e])}catch(e){U.THREAD_ERRO(e);return this}};return this};M.Commandable=F}})();
;/*========== INCLUDE @Mixines/Monitorable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Monitorable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.on('change','[data-monitor]',this.onMonitor.bindToObject(this));return this};F.prototype.onMonitor=function(e){var T=jQuery(e.currentTarget),cmd=U.NEString(T.data('monitor'));if(cmd){var cmda=cmd.split(',');for(var ii=0;ii<cmda.length;ii++)if(cmda[ii]&&cmda[ii].length){var fn=['onMonitor',U.UCFirst(cmda[ii])].join('');if(U.isCallable(this[fn]))try{e.stopPropagation();(U.anyBool(T.data('prevent'),true))?(e.preventDefault?e.preventDefault():e.returnValue=false):false;this[fn].apply(this,[T,e])}catch(e){U.THREAD_ERRO(e);return this}}};return this};M.Monitorable=F}})();
;/*========== INCLUDE @Mixines/Roleable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Roleable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this._roles=U.scan(this.handle,'role');return this};F.prototype.getRole=function(x){if(!(x in this._roles))this._roles[x]=jQuery(null);return this._roles[x]};M.Roleable=F}})();
;/*========== INCLUDE @Mixines/Fieldable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Fieldable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this._fields=U.scan(this.handle,'field');this.LEM.On('RESET_CONTENT',this,this.fieldable_clean);return this};F.prototype.getField=function(x){if(!(x in this._fields))this._fields[x]=jQuery(null);return this._fields[x]};F.prototype.getFields=function(){var R={};U.isObject(this._fields)?false:this._fields={};for(var k in this._fields)if(this._fields.hasOwnProperty(k)){var field=this.getField(k),fn="_get_field_"+k.replace(/\./g,'_');if(U.isCallable(this[fn])){R[k]=this[fn].call(this,field)}else if(field.is('input[type=checkbox]')){U.setItemOnPath(R,k,field.prop('checked')?1:0)}else if(field.is('input,textarea,select')){U.setItemOnPath(R,k,field.val())}else U.setItemOnPath(R,k,field.html())};return R};F.prototype.setFields=function(data){data=U.isObject(data)?data:{};U.isObject(this._fields)?false:this._fields={};for(var k in this._fields)if(this._fields.hasOwnProperty(k)){var field=this.getField(k),fn="_set_field_"+k.replace(/\./g,'_');if(U.isCallable(this[fn])){this[fn].call(this,data,field)}else if(U.path_exists(data,k)){if(field.is('input[type=checkbox]')){field.prop('checked',U.anyBool(U.getItemOnPath(data,k,false)))}else if(field.is('input,textarea,select')){field.val(U.getItemOnPath(data,k,null))}else field.html(U.getItemOnPath(data,k,null))}else this.setDefaultFieldValue(k)};return this};F.prototype.setDefaultFieldValue=function(field_name){var p=this.getField(field_name);if(p&&p.length){var pd=p.data('fielddefault');if(p.is('input[type=checkbox]')){var val=U.anyBool(pd,false);p.prop('checked',val)}else if(p.is('input,textarea')){var val=U.NEString(pd,'');p.val(val)}else if(p.is('select')){var val=U.NEString(pd,null);p.val(val)}else{var val=U.NEString(pd,'');p.html(val)}};return this};F.prototype.fieldable_clean=function(){this.setFields(null);return this};M.Fieldable=F}})();
;/*========== INCLUDE @Mixines/Loaderable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Loaderable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){return this};F.prototype.showLoader=function(x){U.isCallable(this.getRole)?this.getRole('loader').show():false;return this};F.prototype.hideLoader=function(x){U.isCallable(this.getRole)?this.getRole('loader').hide():false;return this};M.Loaderable=F}})();
;/*========== INCLUDE @Mixines/Sizeable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Sizeable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.sizeable_init();return this};F.prototype.interface={sizeable_getMarker:function(){},sizeable_getWindow:function(){},sizeable_getContainer:function(){},sizeable_getParams:function(){},sizeable_setParams:function(){},sizeable_defaultWidth:function(){},sizeable_defaultHeight:function(){},events:{NEED_POSITE:"Требуется репозиционировать элемент"}};F.prototype.sizeable_init=function(){var w=(U.isCallable(this.sizeable_defaultWidth)?this.sizeable_defaultWidth():80),h=(U.isCallable(this.sizeable_defaultHeight)?this.sizeable_defaultHeight():80),P=(U.isCallable(this.sizeable_getParams)?this.sizeable_getParams():{});try{if(U.isObject(P)&&('w'in P)&&('h'in P)&&typeof(P.h)==='number'&&!isNaN(P.h)&&typeof(P.w)==='number'&&!isNaN(P.w)){w=P.w;h=P.h}}catch(e){w=80,h=80};this.sizeable_getWindow().css({width:w+'%',height:h+'%'});this.sizeable_getMarker().on('mousedown',this.sizeable_enableResizeWatch.bindToObject(this));this.LEM.Run('NEED_POSITE');return this};F.prototype.sizeable_enableResizeWatch=function(e){e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=false;this.sizeable_abortResize();this.sizeable_startX=e.pageX;this.sizeable_startY=e.pageY;jQuery(document).on('mousemove',this.sizeable_checkResizeBegins.bindToObject(this)).on('mouseup',this.sizeable_abortResize.bindToObject(this));return this};F.prototype.sizeable_checkResizeBegins=function(e){var deltaX=Math.max(e.pageX,this.sizeable_startX)-Math.min(e.pageX,this.sizeable_startX),deltaY=Math.max(e.pageY,this.sizeable_startY)-Math.min(e.pageY,this.sizeable_startY),delta=Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));if(delta>15)this.sizeable_runResizer(e);return this};F.prototype.sizeable_runResizer=function(e){this.sizeable_abortResize();this.sizeable_getWindow().addClass('sizeable_notransition');this.sizeable_rinit_height=parseFloat(this.sizeable_getWindow().outerHeight(true));this.sizeable_rinit_width=parseFloat(this.sizeable_getWindow().outerWidth(true));jQuery(document).on('mousemove',this.sizeable_updateSizeResize.bindToObject(this)).on('mouseup',this.sizeable_fixupResize.bindToObject(this));return this.sizeable_updateSizeResize(e)};F.prototype.sizeable_updateSizeResize=function(e){var deltaX=e.pageX-this.sizeable_startX,deltaY=e.pageY-this.sizeable_startY,cw=this.sizeable_rinit_width+deltaX*this.sizeable_scaleFactor(),ch=this.sizeable_rinit_height+deltaY*this.sizeable_scaleFactor();this.sizeable_getWindow().css({width:cw+'px',height:ch+'px'});this.LEM.Run('NEED_POSITE');return this};F.prototype.sizeable_fixupResize=function(e){this.sizeable_updateSizeResize(e);this.sizeable_abortResize();var ch=parseFloat(this.sizeable_getWindow().outerHeight(true)),cw=parseFloat(this.sizeable_getWindow().outerWidth(true)),ww=parseFloat(this.sizeable_getContainer().innerWidth()),wh=parseFloat(this.sizeable_getContainer().innerHeight()),wpc=cw/(ww/100),hpc=ch/(wh/100);this.sizeable_getWindow().css({width:wpc+'%',height:hpc+'%'});this.sizeable_setParams({w:wpc,h:hpc});e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=false;this.LEM.Run('NEED_POSITE');return this};F.prototype.sizeable_abortResize=function(){jQuery(document).off('mousemove',this.sizeable_updateSizeResize.bindToObject(this)).off('mouseup',this.sizeable_fixupResize.bindToObject(this)).off('mousemove',this.sizeable_checkResizeBegins.bindToObject(this)).off('mouseup',this.sizeable_abortResize.bindToObject(this));this.sizeable_getWindow().removeClass('sizeable_notransition');return this};F.prototype.sizeable_scaleFactor=function(){return 1};M.Sizeable=F}})();
;/*========== INCLUDE @Mixines/Tabbable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Tabbable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.on('click','[data-tabheader]',this.onTabclick.bindToObject(this));this.LEM.On('RESET_CONTENT',this,this.Tabbable_reset);return this};F.prototype.onTabclick=function(e){var T=jQuery(e.currentTarget);T.addClass('EFOTabHeaderActive').parent().find('[data-tabheader]').not(T).removeClass('EFOTabHeaderActive');var cmd=U.NEString(T.data('tabheader'));if(cmd){this.handle.find('[data-tab]').not('[data-tab="'+cmd+'"]').removeClass('EFOTabActive');this.handle.find('[data-tab="'+cmd+'"]').addClass('EFOTabActive');var fn=['onTabSelected',U.UCFirst(cmd)].join('');if(U.isCallable(this[fn]))try{e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;this[fn].apply(this,[T,e])}catch(e){U.THREAD_ERRO(e);return this}};return this};F.prototype.Tabbable_reset=function(){var a=this.handle.find('[data-tabheader][data-defaulttabheader]');a.length?false:this.handle.find('[data-tabheader]:first');a.click();return this};F.prototype.Tabbable_reselect=function(){var a=this.handle.find('.EFOTabHeaderActive');a&&a.length?a.click():this.Tabbable_reset();return this};M.Tabbable=F}})();
;/*========== INCLUDE @Mixines/Callbackable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Callbackable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){return this};F.prototype.setCallback=function(co,ca){var cb=CB(co,ca);if(cb&&cb.isValid())this._callbackable_push_callback(cb);return this};F.prototype._callbackable_push_callback=function(cb){if(CB.is(cb)){U.isArray(this._callbackable_callbacks)?false:this._callbackable_callbacks=[];this._callbackable_callbacks.push(cb)};return this};F.prototype.clearCallbacks=function(){this._callbackable_callbacks=[];return this};F.prototype.runCallback=function(){var args=Array.prototype.slice.call(arguments);U.isArray(this._callbackable_callbacks)?false:this._callbackable_callbacks=[];for(var i=0;i<this._callbackable_callbacks.length;i++)try{this._callbackable_callbacks[i].run(args)}catch(e){U.THREAD_ERRO(e)};return this}
function CB(co,ca){return CB.is(this)?this.init(co,ca):CB.F(co,ca)};U.normalizeConstructor(CB);CB.F=function(a,b){return new CB(a,b)};CB.prototype._context=null;CB.prototype._callable=null;CB.prototype.init=function(co,ca){this._context=U.isObject(co)?co:null;this._callable=U.isCallable(ca)?ca:null;return this};CB.prototype.isValid=function(){return U.isCallable(this._callable)};CB.prototype.run=function(ps){ps=U.isArray(ps)?ps:[];if(U.isCallable(this._callable)){var co=U.isObject(this._context)?this._context:this;this._callable.apply(co,ps)};return this};M.Callbackable=F}})();
;/*========== INCLUDE @classes/Controller========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Controller?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){U.AbstractError()};U.normalizeConstructor(F);F.prototype.LEM=null;F.prototype.mixinesToInit=null;F.prototype.init=function(){this.LEM=EFO.Events.LEM();this.controller_id=U.UID('controller');this.onBeforeInit.apply(this,Array.prototype.slice.call(arguments));return this};F.prototype.getControllerId=function(){return this.controller_id};F.prototype._getMixines=function(){return U.isArray(this.mixinesToInit)?this.mixinesToInit:[]};F.prototype.initMixines=function(){var r=this._getMixines();for(var i=0;i<r.length;i++)if(U.isCallable(r[i]))try{r[i].call(this)}catch(e){U.THREAD_ERRO(e)};this.LEM.Run('INIT_MIXINES_END',this);return this};F.prototype.onBeforeInit=function(){return this};F.prototype.getControllerAlias=function(){U.AbstractError()};F.prototype.threadError=function(x){U.THREAD_ERR(x);return this};F.prototype.threadErrorObject=function(x){U.THREAD_ERRO(x);return this};F.prototype.UID=function(){return U.UID()};F.prototype.RUID=function(){return U.RUID()};EFO.Controller=F}})();
;/*========== INCLUDE @classes/Handlable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Handlable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){U.AbstractError()};F.xInheritE(EFO.Controller);F.prototype.handle=null;F.prototype.wrapperTemplate=null;F.prototype.init=function(){var args=Array.prototype.slice.call(arguments);EFO.Controller.prototype.init.apply(this,args);var subTemplates=this.prepareSubTemplates();this.wrapperTemplate=Mustache.render(this.getWrapperTemplate(),this,subTemplates);this.handle=jQuery(Mustache.render(this.wrapperTemplate,this,subTemplates));this.initMixines();this.LEM.Run('INIT',this);this.onInit.apply(this,args);return this};F.prototype.onInit=function(){return this};F.prototype.getWrapperTemplate=function(){return EFO.TemplateManager().get('Handlable.default')};F.prototype.getContainer=function(){return jQuery('body')};F.prototype.show=function(){var args=Array.prototype.slice.call(arguments);this.onBeforeShow(args);this.LEM.Run('ON_BEFORE_SHOW',this);this.handle.appendTo(this.getContainer()).fadeIn(100);this.onAfterShow(args);this.LEM.Run('ON_AFTER_SHOW',this);return this};F.prototype.hide=function(){var args=Array.prototype.slice.call(arguments);this.onBeforeHide(args);this.LEM.Run('ON_BEFORE_HIDE',this);this.handle.hide();this.onAfterHide(args);this.LEM.Run('ON_AFTER_HIDE',this);return this};F.prototype.onBeforeShow=function(){return this};F.prototype.onAfterShow=function(){return this};F.prototype.onBeforeHide=function(){return this};F.prototype.onAfterHide=function(){return this};F.prototype.getContentTemplate=function(){this.threadError("handlable::getContentTemplate must be overriden");return'widgetContent'};F.prototype.getCssClass=function(){U.AbstractError()};F.prototype.enumSubTemplates=function(){return[]};F.prototype.prepareSubTemplates=function(){var RO={},AR=this.enumSubTemplates();AR=U.isArray(AR)?AR:[];for(var i=0;i<AR.length;i++)RO[EFO.TemplateManager().prepareSubKey(AR[i])]=EFO.TemplateManager().get(AR[i]);return RO};EFO.Handlable=F}})();
;/*========== INCLUDE @widgets/widget========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.widget?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(){return U.AbstractError()};F.xInheritE(EFO.Handlable);F.prototype._container=null;F.prototype.handle=null;F.prototype._uid=null;F.prototype.beforeInit=function(){this._uid=U.UID('widget');return this};F.prototype.getWrapperTemplate=function(){var t=EFO.TemplateManager().get('default',this.getWidgetClass());return t&&t.length?t:EFO.TemplateManager().get('default','widget')};F.prototype.getContentTemplate=function(){var t=EFO.TemplateManager().get('content',this.getWidgetClass());if(t&&t.length)return t;this.threadError("widget::getContentTemplate must be overriden");return'widgetContent'};F.prototype.show=function(){if(this.getContainer())EFO.Handlable.prototype.show.apply(this,Array.prototype.slice.call(arguments));return this};F.prototype.getWidgetClass=function(){U.AbstractError()};F.prototype.getCssClass=function(){return['widget',this.getWidgetClass()].join('')};F.prototype.setContainer=function(x){this._container=x;return this._container?this.show():this.hide()};F.prototype.getContainer=function(){return this._container};WNS.widget=F}})();
;/*========== INCLUDE @widgets/Paginator========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.Paginator?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(WNS.widget);F.mixines=['Roleable'];U.initMixines(F);F.prototype._page=0;F.prototype.getWidgetClass=function(){return'Paginator'};F.prototype.setData=function(page,total,perpage){page=U.IntMoreOr(page,0,0);this._page=page;this._maxpage=Math.ceil(total/perpage)-1;var items=this.createItems(page,total,perpage);this.getRole('items').html(items.length>1?Mustache.render(EFO.TemplateManager().get('items',this.getWidgetClass()),{items:items,getCssClass:this.getCssClass(),hasPrev:(page>0),hasNext:(page<this._maxpage)},{item:EFO.TemplateManager().get('item',this.getWidgetClass())}):'');return(items.length>1?this.enable:this.disable).call(this)};F.prototype.createItems=function(page,total,perpage){var pages=Math.ceil(total/perpage),pre=[0,1,2,page-1,page,page+1,pages-3,pages-2,pages-1];pre.sort(function(x,b){return x-b});var ix=[],ids={},lco=-1;for(var i=0;i<pre.length;i++)if(pre[i]>=0&&pre[i]<=this._maxpage){var key="S"+pre[i];if(!(key in ids)){ids[key]=1;lco===pre[i]-1?false:ix.push(EL(null));ix.push(EL(pre[i],page));lco=pre[i]}};return ix};F.prototype.enable=function(){this.getRole('items').show();return this};F.prototype.disable=function(){this.getRole('items').hide();return this};F.prototype.getCurrentPage=function(){return U.IntMoreOr(this._page,0,0)};F.prototype.maxPage=function(){return U.IntMoreOr(this._maxpage,0,0)}
function EL(i,c){return EL.is(this)?this.init(i,c):EL.F(i,c)};U.normalizeConstructor(EL);EL.F=function(i,c){return new EL(i,c)};EL.prototype.i=null;EL.prototype.c=null;EL.prototype.current=false;EL.prototype.text=null;EL.prototype.separator=false;EL.prototype.init=function(i,c){this.i=U.IntMoreOr(i,-1,null);this.c=U.IntMoreOr(c,0,0);this.separator=this.i===null;this.text=this.separator?'...':(i+1).toString();this.current=this.separator?false:(this.i===this.c);return this};WNS.Paginator=F;WNS.Paginator.Element=EL}})();
;/*========== INCLUDE @widgets/TreeView========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.TreeView?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(WNS.widget);F.mixines=['Roleable','Commandable','Loaderable'];U.initMixines(F);F.prototype.onBeforeInit=function(){this.getCssClassBinded=this.getCssClass.bindToObject(this);this.getDragTypeBinded=this.getDragType.bindToObject(this);this.getDragTargetBinded=this.getDragTarget.bindToObject(this);this.getIsDraggableBinded=this.getIsDraggable.bindToObject(this);var self=this;this.getElementOpened=function(){return self._getElementOpened(this)};return WNS.widget.prototype.onBeforeInit.apply(this,Array.prototype.slice.call(arguments))};F.prototype.onInit=function(){WNS.widget.prototype.onInit.apply(this,Array.prototype.slice.call(arguments));this.TreeState=TS(this.getStorageName());return this.initHandlers()};F.prototype.getWidgetClass=function(){return'TreeView'};F.prototype.getCssClass=function(){return'widgetTreeView'};F.prototype.getCommandButtons=function(){console.log('TreeView::getCommandButtons must be overriden');return[]};F.prototype.enableToolbar=function(){return true};F.prototype.enableContextMenu=function(){return true};F.prototype.enableMultiSelect=function(){return false};F.prototype.getToolbarTemplate=function(){var t=EFO.TemplateManager().get('toolbar',this.getWidgetClass());return(t&&t.length)?t:'TreeViewContent'};F.prototype.getDragType=function(){return'UserGroup'};F.prototype.getDragTarget=function(){return'UserGroup,User'};F.prototype.getIsDraggable=function(){return true};F.prototype.getStorageName=function(){return null};F.prototype.getVirtualBefore=function(){return[]};F.prototype.getVirtualAfter=function(){return[]};F.prototype.setData=function($rootArray){var $toRender=[].concat(U.safeArray(this.getVirtualBefore()),U.safeArray($rootArray),U.safeArray(this.getVirtualAfter()));this.tree=Tree($toRender,this);this.render();this.setSelection(this.TreeState.getSelected());var N=this.getDefaultSelected();N?this.LEM.Run('NODE_SELECTED',this,N):false;return this};F.prototype.resetSelection=function(){this.handle.find(this.cmClass('selected')).removeClass(this.cmClass('selected',false));return this};F.prototype.setSelection=function(x){this.handle.find(this.cmClass('selected')).removeClass(this.cmClass('selected',false));var s=null;try{s=this.handle.find(this.cmClass('NodeElement')+'[data-key="'+x+'"]');s=s&&s.length?s:null}catch(e){s=null};s=s?s:this.handle.find(this.cmClass('NodeElement')+':first');s&&s.length?s.addClass(this.cmClass('selected',false)):false;return this};F.prototype.getDefaultSelected=function(){var x=this.handle.find(this.cmClass('selected')+':first').data('key');return x?this.getNodeByKey(x):null};F.prototype.render=function(){var TO={element:EFO.TemplateManager().get('node',this.getWidgetClass())};this.childs=this.tree.root;this.getRole('items').html(Mustache.render(TO.element,this,TO));this.childs=null;return this};F.prototype.initHandlers=function(){this.handle.on('click','[data-node-element="itemHeader"]',this.onHeaderClick.bindToObject(this));this.handle.on('click','[data-node-element="itemIcon"]',this.onIconClick.bindToObject(this));this.handle.on('contextmenu','[data-node-element="itemHeader"]',this.onContextMenu.bindToObject(this));this.initDnD();return this};F.prototype.cmClass=function(x,pf){pf=U.anyBool(pf,true);return[pf?'.':'',this.getCssClass(),x].join('')};F.prototype.getNodeByKey=function(key){return this.tree.getNodeByKey(key)};F.prototype.onHeaderClick=function(e){var t=jQuery(e.currentTarget),te=t.closest(this.cmClass('NodeElement'));if(!te.hasClass(this.cmClass('selected',false))){if(!this.enableMultiSelect()){var z=this.handle.find(this.cmClass('selected'));if(z.length){var tt=z.data('key');z.removeClass(this.cmClass('selected',false));this.LEM.Run('NODE_UNSELECTED',this,this.getNodeByKey(tt))}};var node=this.getNodeByKey(te.data('key'));te.addClass(this.cmClass('selected',false)).removeClass(this.cmClass('NodeElementStateclosed',false)).addClass(this.cmClass('NodeElementStateopened',false));this.LEM.Run('NODE_SELECTED',this,node);this.TreeState.setSelected(node.key);this.LEM.Run('NODE_OPENED',this,node);this.TreeState.setOpenedSave(node.key,true)}else if(this.enableMultiSelect()){te.removeClass(this.cmClass('selected',false));this.LEM.Run('NODE_UNSELECTED',this,this.getNodeByKey(tt))};return this};F.prototype.onIconClick=function(e){var t=jQuery(e.currentTarget),te=t.closest(this.cmClass('NodeElement'));if(te.hasClass(this.cmClass('NodeElementStateclosed',false))){te.removeClass(this.cmClass('NodeElementStateclosed',false)).addClass(this.cmClass('NodeElementStateopened',false));this.LEM.Run('NODE_OPENED',this,this.getNodeByKey(te.data('key')));this.TreeState.setOpenedSave(te.data('key'),true)}else{te.removeClass(this.cmClass('NodeElementStateopened',false)).addClass(this.cmClass('NodeElementStateclosed',false));this.LEM.Run('NODE_CLOSED',this,this.getNodeByKey(te.data('key')));this.TreeState.setOpenedSave(te.data('key'),false)};e.stopPropagation();return this};F.prototype.onContextMenu=function(e){if(this.enableContextMenu()){e.preventDefault?e.preventDefault():e.returnValue=false;var t=jQuery(e.currentTarget);this.contextMenu?false:this.createContextMenu();var TE=t.closest(this.cmClass('NodeElement'));this.contextMenu.setItems(this.getContextMenuItems()).show(jQuery(e.currentTarget)).setData(this.getNodeByKey(TE.data('key')))};return this};F.prototype.createContextMenu=function(){this.contextMenu=WNS.contextMenu(this.getCssClass()).setCI(this);return this};F.prototype.getContextMenuItems=function(){return[{command:'edit',icon:'edit',title:"Редактировать"},{command:'addChild',icon:'child',title:"Добавить дочерний"},{command:'remove',icon:'remove',title:"Удалить"}]};F.prototype.initDnD=function(){if(this.getIsDraggable()){EFO.DnDManager().LEM.On('ON_DRAG_OVER_UserGroup',this,this.onDragOverUg.bindToObject(this));EFO.DnDManager().LEM.On('ON_DRAG_LEAVE_UserGroup',this,this.onDragLeaveUg.bindToObject(this));EFO.DnDManager().LEM.On('ON_DROPPED_UserGroup',this,this.onInternalDrop.bindToObject(this))};return this};F.prototype.onDragOverUg=function(DM,T){var ET=T.closest(this.cmClass('NodeElement'));if(ET.hasClass(this.cmClass('NodeElementStateclosed',false))){this._to_open_node=ET;this._open_node_to=window.setTimeout(this.autoOpenNode.bindToObject(this),500)};return this};F.prototype.onDragLeaveUg=function(DM,T){this._to_open_node=null;window.clearTimeout(this._open_node_to);this._open_node_to=null;return this};F.prototype.onInternalDrop=function(DM,T){try{var Target=this.getNodeByKey(T.closest(this.cmClass('NodeElement')).data('key')),Darggable=this.getNodeByKey(DM._dragging.closest(this.cmClass('NodeElement')).data('key'));this.LEM.Run('INTERNAL_DRAG',Darggable,Target);this.onDropTreeItem(Darggable,Target)}catch(e){U.THREAD_ERRO(e)};return this};F.prototype.onDropTreeItem=function(d,t){return this};F.prototype.autoOpenNode=function(){if(this._to_open_node)this._to_open_node.removeClass(this.cmClass('NodeElementStateclosed',false)).addClass(this.cmClass('NodeElementStateopened',false));return this};F.prototype.getSelection=function(){var j=this.handle.find(this.cmClass('selected')),r=[],result=[];if(j&&j.length){j.each(function(){r.push(jQuery(this).data('key'))});for(var i=0;i<r.length;i++){var el=this.getNodeByKey(r[i]);el?result.push(el):false}};return this.enableMultiSelect()?result:result.slice(0,1)};F.prototype._getElementOpened=function(node){return this.TreeState.getOpened(node.key)}
function Tree(rA,cI){return Tree.is(this)?this.init(rA,cI):Tree.F(rA,cI)};U.normalizeConstructor(Tree);Tree.F=function(z,x){return new Tree(z,x)};Tree.prototype.data_interface=null;Tree.prototype.data=null;Tree.prototype.root=null;Tree.prototype.getElementId=null;Tree.prototype.getElementKey=null;Tree.prototype.getElementName=null;Tree.prototype.getElementCss=null;Tree.prototype.getElementOpened=null;Tree.prototype.getElementHasChilds=null;Tree.prototype.getElementChilds=null;Tree.prototype.getElementIconName=null;Tree.prototype.index=null;Tree.prototype.init=function(data,di){this.data_interface=U.isObject(di)?di:null;this.data=U.isArray(data)?data:[];this.initInterface();this.root=[];this.index={};for(var i=0;i<this.data.length;i++)this.root.push(Node(this.data[i],this));return this};Tree.prototype.initInterface=function(){var rt=['getElementId','getElementKey','getElementName','getElementCss','getElementOpened','getElementHasChilds','getElementChilds','getElementIconName'];for(var i=0;i<rt.length;i++)this[rt[i]]=this.data_interface&&U.isCallable(this.data_interface[rt[i]])?this.data_interface[rt[i]]:this['_'+rt[i]];return this};Tree.prototype._getElementId=function(){return this.id};Tree.prototype._getElementKey=function(){return['N',this.id].join('')};Tree.prototype._getElementName=function(){return this.name};Tree.prototype._getElementCss=function(){return''};Tree.prototype._getElementOpened=function(){return false};Tree.prototype._getElementHasChilds=function(){return this.childs&&U.isArray(this.childs)&&this.childs.length?true:false};Tree.prototype._getElementChilds=function(){return this.childs};Tree.prototype._getElementIconName=function(){return'Floder'};Tree.prototype.getNodeByKey=function(key){return key&&(key in this.index)?this.index[key]:null}
function Node(x,di){return Node.is(this)?this.init(x,di):Node.F(x,di)};U.normalizeConstructor(Node);Node.F=function(x,di){return new Node(x,di)};Node.prototype.id=null;Node.prototype.name=null;Node.prototype.key=null;Node.prototype.css=null;Node.prototype.opened=false;Node.prototype.hasChilds=false;Node.prototype.childs=null;Node.prototype.source=null;Node.prototype.icon=null;Node.prototype.init=function(x,di,parent){x=U.isObject(x)?x:{};this.id=di.getElementId.call(x);this.key=di.getElementKey.call(x);this.name=di.getElementName.call(x);this.css=di.getElementCss.call(x);this.hasChilds=di.getElementHasChilds.call(x);this.icon=di.getElementIconName.call(x);di.index[this.key]=this;this.source=x;this.opened=di.getElementOpened.call(this);var childs=this.hasChilds?di.getElementChilds.call(x):null;if(childs){this.childs=[];for(var i=0;i<childs.length;i++)this.childs.push(Node(childs[i],di,this))}else this.childs=null;return this}
function TS(x){return TS.is(this)?this.init(x):TS.F(x)};U.normalizeConstructor(TS);TS.F=function(x){return new TS(x)};TS.prototype.key=null;TS.prototype.data=null;TS.prototype.init=function(x){this.key=U.NEString(x,null);this.load();return this};TS.prototype.load=function(){if(this.checkKey())try{this.data=JSON.parse(localStorage.getItem(this.key));U.isObject(this.data)?false:this.data={};return this}catch(e){};this.data={};return this};TS.prototype.save=function(){if(this.checkKey())try{localStorage.setItem(this.key,JSON.stringify(this.data))}catch(e){};return this};TS.prototype.getSelected=function(){return('s'in this.data)?this.data.s:null};TS.prototype.setSelected=function(x){this.data.s=x;return this};TS.prototype.setSelectedSave=function(x){return this.setSelected(x).save()};TS.prototype.getOpened=function(x){return U.isObject(this.data.o)&&(x in this.data.o)?U.anyBool(this.data.o[x],false):false};TS.prototype.setOpened=function(x,s){U.isObject(this.data.o)?false:this.data.o={};if(U.anyBool(s,false)){this.data.o[x]=1}else if(x in this.data.o)delete(this.data.o[x]);return this};TS.prototype.setOpenedSave=function(x,s){return this.setOpened(x,s).save()};TS.prototype.checkKey=function(){return this.key?true:false};WNS.TreeView=F;WNS.TreeView.Tree=Tree;WNS.TreeView.Tree.Node=Node;WNS.TreeView.TreeState=TS}})();
;/*========== INCLUDE @widgets/contextMenu========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.contextMenu?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(cc){return F.is(this)?this.init(cc):F.F(cc)};F.xInheritE(WNS.widget);F.F=function(cc){return new F(cc)};F.mixines=['Roleable','Commandable'];U.initMixines(F);F.prototype.CI=null;F.prototype.customClass=null;F.prototype.items=null;F.prototype._contextData=null;F.prototype.getWidgetClass=function(){return'contextMenu'};F.prototype.onBeforeInit=function(cc){this.customClass=cc;this.getCssClassBind=this.getCssClass.bindToObject(this);return WNS.widget.prototype.onBeforeInit.apply(this,Array.prototype.slice.call(arguments))};F.prototype.onInit=function(cc){this.initMenuHandlers();return WNS.widget.prototype.onInit.apply(this,Array.prototype.slice.call(arguments))};F.prototype.setItems=function(x){x=U.isArray(x)?x:null;this.items=x;this.getRole('items').html(Mustache.render(EFO.TemplateManager().get('items',this.getWidgetClass()),this));return this};F.prototype.setCI=function(x){this.CI=U.isObject(x)?x:null;return this};F.prototype.setData=function(x){this._contextData=x;return this};F.prototype.getData=function(){return this._contextData};F.prototype.getContainer=function(){return jQuery('body')};F.prototype.onCommand=function(e){var t=jQuery(e.currentTarget),command=U.UCFirst(t.data('command'));if(command&&command.length){var cm="onMenuCommand"+command;if(this.CI&&U.isCallable(this.CI[cm])){e.preventDefault?e.preventDefault():e.returnValue=false;e.stopPropagation();this.CI[cm](t,e,this)}else U.THREAD_ERR("NoCommandHandler:"+cm)};return this.hide()};F.prototype.initMenuHandlers=function(){this.handle.on('mouseleave',this.hide.bindToObject(this));return this};F.prototype.show=function(x){WNS.widget.prototype.show.apply(this,Array.prototype.slice(arguments));return this.positeContextMenu(x)};F.prototype.positeContextMenu=function(x){if(window.jQuery&&U.isObject(x)&&(x instanceof jQuery)){var pos=x.offset(),left=pos.left,top=pos.top,yo=parseFloat(x.outerHeight(true)),mw=parseFloat(this.handle.outerWidth(true)),mh=parseFloat(this.handle.outerHeight(true)),wh=parseFloat(jQuery(window).innerHeight()),ww=parseFloat(jQuery(window).innerWidth()),st=parseFloat(jQuery(document).scrollTop());top=top+yo;if((top+mh)-st>wh)top=(st+wh)-mh;if(left+mw>ww)left=ww-mw;this.handle.css({left:left+'px',top:top+'px'})};return this};WNS.contextMenu=F}})();
;/*========== INCLUDE @classes/windowController========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.windowController?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(EFO.Handlable);F.prototype.getWrapperTemplate=function(){return EFO.TemplateManager().get('windowController.default')};F.prototype.getControllerAlias=function(){return'windowController'};F.prototype.getCssClass=function(){return'windowController'};F.prototype.enumSubTemplates=function(){return['windowController.footer','windowController.footerButton','windowController.title']};F.prototype.getFooterButtons=function(){return[{command:"cancel",text:"Отмена"},{command:"apply",text:"применить"}]};F.prototype.getDefaultTitle=function(){return"title"};F.prototype.placeAtCenter=function(){try{var pcwidth=parseFloat(this.handle.innerWidth())/100,pcheight=parseFloat(this.handle.innerHeight())/100,mwpc=parseFloat(this.getRole('window').outerWidth(true))/pcwidth,mhpc=parseFloat(this.getRole('window').outerHeight(true))/pcheight,mtpc=(100-mhpc)/2,mlpc=(100-mwpc)/2;this.getRole('window').css({top:mtpc+'%',left:mlpc+'%'})}catch(e){this.threadErrorObject(e)};return this};F.prototype.sizeable_getMarker=function(){try{return this.getRole('resizer')}catch(e){this.threadErrorObject(e)};return jQuery(null)};F.prototype.sizeable_getWindow=function(){try{return this.getRole('window')}catch(e){this.threadErrorObject(e)};return jQuery(null)};F.prototype.sizeable_getContainer=function(){return this.handle};F.prototype.sizeable_getParams=function(){return{w:80,h:80}};F.prototype.sizeable_setParams=function(){return this};F.prototype.sizeable_defaultWidth=function(){return 80};F.prototype.sizeable_defaultHeight=function(){return 80};EFO.windowController=F}})();
;/*========== INCLUDE @classes/flatController========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.flatController?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(EFO.Handlable);F.prototype.fragment=null;F.prototype.container=null;F.prototype.getWrapperTemplate=function(){return EFO.TemplateManager().get('flatController.default')};F.prototype.getControllerAlias=function(){return'flatController'};F.prototype.getCssClass=function(){return'flatController'};F.prototype.enumSubTemplates=function(){return[]};F.prototype.setContainer=function(x){this.container=U.isDOM(x)?x:U.isJQuery(x)?x:U.NEString(x)?document.getElementById(U.NEString(x)):null;if(this.container)this.show();return this};F.prototype.getContainer=function(){if(this.container)return this.container;return this.getFragment()};F.prototype.getFragment=function(){if(!this.fragment)this.fragment=document.createDocumentFragment();return this.fragment};F.prototype.onAfterHide=function(){this.handle?this.handle.appendTo(this.getFragment()):false;return EFO.Handlable.prototype.onAfterHide.apply(this,Array.prototype.slice.call(arguments))};EFO.flatController=F}})();
;/*========== INCLUDE @Com/EFOPromise========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.EFOPromise?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function PromiseCallback(co,ca){return PromiseCallback.is(this)?this.init(co,ca):PromiseCallback.F(co,ca)};U.normalizeConstructor(PromiseCallback);var PC=PromiseCallback;PC.prototype.context=null;PC.prototype.callable=null;PC.prototype.init=function(co,ca){this.callable=U.isCallable(ca)?ca:(U.isCallable(co)?co:null);this.context=U.isObject(co)?co:(U.isObject(ca)?ca:null);return this};PC.prototype.isValid=function(){return this.callable?true:false};PC.prototype.run=function(){var args=Array.prototype.slice.call(arguments);return this.runArray(args)};PC.prototype.runArray=function(args){args=U.safeArray(args);if(this.callable)try{return this.callable.apply(this.context?this.context:this,args)}catch(err){U.TError(err)};return null};PC.prototype.pushValid=function(pushTo){(U.isArray(pushTo)&&this.isValid())?pushTo.push(this):false;return this};PC.prototype.setFailsaveContext=function(x){this.context===null&&U.isObject(x)?this.context=x:false;return this};PC.prototype.clear=function(){this.context=null;this.callable=null;return this}
function Promise(co,cbfn){U.isCallable(cbfn)||U.isCallable(co)?false:U.ERR("EFOPromise requires callable");return Promise.is(this)?this.init.apply(this,Array.prototype.slice.call(arguments)):Promise.F.apply(this,Array.prototype.slice.call(arguments))};U.normalizeConstructor(Promise);var F=Promise,EFOPromise=Promise;F.prototype.handlersSuccess=null;F.prototype.handlersError=null;F.prototype.handlersSuccessAfter=null;F.prototype.handlersErrorAfter=null;F.prototype.handlersSuccessBefore=null;F.prototype.handlersErrorBefore=null;F.prototype.state=0;F.prototype.result=null;F.prototype.init=function(runContext,callable){this.initHandlersArrays();var nc=this.fixContext(runContext,callable);try{nc.callable.apply(nc.context,[this.onSuccess.bindToObject(this),this.onFail.bindToObject(this)].concat(Array.prototype.slice.call(arguments,2)))}catch(e){this.onFail(e)};return this};F.prototype.fixContext=function(co,ca){return{context:U.isObject(co)?co:(U.isObject(ca)?ca:this),callable:U.isCallable(ca)?ca:(U.isCallable(co)?co:null)}};F.prototype.initHandlersArrays=function(){this.handlersError=[];this.handlersErrorAfter=[];this.handlersErrorBefore=[];this.handlersSuccess=[];this.handlersSuccessAfter=[];this.handlersSuccessBefore=[];return this};F.prototype.clearHandlersArrays=function(){this.handlersError=null;this.handlersErrorAfter=null;this.handlersErrorBefore=null;this.handlersSuccess=null;this.handlersSuccessAfter=null;this.handlersSuccessBefore=null;return this};F.prototype.clear=function(){return this.clearCallbacks(this.handlersError).clearCallbacks(this.handlersErrorAfter).clearCallbacks(this.handlersErrorBefore).clearCallbacks(this.handlersSuccess).clearCallbacks(this.handlersSuccessAfter).clearCallbacks(this.handlersSuccessBefore).clearHandlersArrays()};F.prototype.clearCallbacks=function(x){x=U.safeArray(x);for(var i=0;i<x.length;i++)x[i].clear();return this};F.prototype.done=function(co,ca){(this.state===1)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersSuccess):false;return this};F.prototype.doneAfter=function(co,ca){(this.state===1)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersSuccessAfter):false;return this};F.prototype.doneBefore=function(co,ca){(this.state===1)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersErrorBefore):false;return this};F.prototype.fail=function(co,ca){(this.state===2)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersError):false;return this};F.prototype.failAfter=function(co,ca){(this.state===2)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersErrorAfter):false;return this};F.prototype.failBefore=function(co,ca){(this.state===2)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersErrorBefore):false;return this};F.prototype.always=function(co,ca){(this.state!==0)?this._applyCallback(PromiseCallback(co,ca)):PromiseCallback(co,ca).pushValid(this.handlersSuccess).pushValid(this.handlersError);return this};F.prototype.alwaysAfter=function(co,ca){(this.state!==0)?this._applyCallback(PromiseCallback(co,ca)):PromiseCallback(co,ca).pushValid(this.handlersSuccessAfter).pushValid(this.handlersErrorAfter);return this};F.prototype.alwaysBefore=function(co,ca){(this.state!==0)?this._applyCallback(PromiseCallback(co,ca)):PromiseCallback(co,ca).pushValid(this.handlersSuccessBefore).pushValid(this.handlersErrorBefore);return this};F.prototype.onSuccess=function(){if(this.state===0){this.state=1;this.result=Array.prototype.slice.call(arguments);for(var i=0;i<this.handlersSuccessBefore.length;i++)this._applyCallback(this.handlersSuccessBefore[i]);for(var i=0;i<this.handlersSuccess.length;i++)this._applyCallback(this.handlersSuccess[i]);for(var i=0;i<this.handlersSuccessAfter.length;i++)this._applyCallback(this.handlersSuccessAfter[i])};return this.clear()};F.prototype.onFail=function(){if(this.state===0){this.state=2;this.result=Array.prototype.slice.call(arguments);for(var i=0;i<this.handlersErrorBefore.length;i++)this._applyCallback(this.handlersErrorBefore[i]);for(var i=0;i<this.handlersError.length;i++)this._applyCallback(this.handlersError[i]);for(var i=0;i<this.handlersErrorAfter.length;i++)this._applyCallback(this.handlersErrorAfter[i])};return this.clear()};F.prototype._applyCallback=function(cbi){if(PromiseCallback.is(cbi))cbi.setFailsaveContext(this).runArray(this.result);return this}
function promiseAggregator(promises){return promiseAggregator.is(this)?this.init(promises):promiseAggregator.F(promises)};U.normalizeConstructor(promiseAggregator);var PW=promiseAggregator;PW.prototype.promises=null;PW.prototype.promise=null;PW.prototype._psuccess=null;PW.prototype._pfail=null;PW.prototype._total=0;PW.prototype._successed=0;PW.prototype.init=function(promises){promises=U.safeArray(promises);this.promises=[];for(var i=0;i<promises.length;i++)if(EFOPromise.is(promises[i]))this.promises.push(promises[i]);for(var i=0;i<this.promises.length;i++){this.promises[i].fail(this,this._promiseFail);this.promises[i].done(this,this._promiseSuccess)};this.promise=EFOPromise(this,this._rqst);return this};PW.prototype._rqst=function(success,fail){this._psuccess=U.isCallable(success)?success:null;this._pfail=U.isCallable(fail)?fail:null;return this.checkReady()};PW.prototype.checkReady=function(){if(this.promises.length===this._successed){U.isCallable(this._psuccess)?this._psuccess():false}else if(this._total===this.promises.length)U.isCallable(this._pfail)?this._pfail():false;return this};PW.prototype._promiseFail=function(){this._total++;return this.checkReady()};PW.prototype._promiseSuccess=function(){this._total++;this._successed++;return this.checkReady()};PW.prototype.done=function(co,ca){this.promise.done.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.doneAfter=function(co,ca){this.promise.doneAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.doneBefore=function(co,ca){this.promise.doneBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.fail=function(co,ca){this.promise.fail.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.failBefore=function(co,ca){this.promise.failBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.failAfter=function(co,ca){this.promise.failAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.always=function(co,ca){this.promise.always.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.alwaysBefore=function(co,ca){this.promise.alwaysBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.alwaysAfter=function(co,ca){this.promise.alwaysAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.waitFor=function(){var promises=[],input=Array.prototype.slice.call(arguments);for(var i=0;i<input.length;i++)if(F.is(input[i]))promises.push(input[i]);return promiseAggregator(promises)};F.waitForArray=function(promises){var ch=[];promises=U.safeArray(promises);for(var i=0;i<promises.length;i++)F.is(promises[i])?ch.push(promises[i]):false;return promiseAggregator(ch)}
function Defer(){return Defer.is(this)?this.init():Defer.F()};U.normalizeConstructor(Defer);Defer.prototype._promisesuccess=null;Defer.prototype._promisefail=null;Defer.prototype.promise=null;Defer.prototype.init=function(){this.promise=Promise(this,function(s,f){this._promisesuccess=s;this._promisefail=f;return this});return this};Defer.prototype.done=function(){this.promise.done.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.doneBefore=function(){this.promise.doneBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.doneAfter=function(){this.promise.doneAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.fail=function(){this.promise.fail.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.failAfter=function(){this.promise.failAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.failBefore=function(){this.promise.failBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.always=function(){this.promise.always.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.alwaysBefore=function(){this.promise.alwaysBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.alwaysAfter=function(){this.promise.alwaysAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.resolve=function(){this._promisesuccess.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.reject=function(){this._promisefail.apply(this.promise,Array.prototype.slice.call(arguments));return this};EFO.EFOPromise=F;EFO.Promise=F;EFO.Defer=Defer}})();
;/*========== INCLUDE @Com/EFORequest========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Request?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,RO=null,H=null,statusProcessors={},preprocessors=[],postprocessors=[]
function PromiseWrapper(s,c,co){return PromiseWrapper.is(this)?this.init(s,c,co):PromiseWrapper.F(s,c,co)};U.normalizeConstructor(PromiseWrapper);var W=PromiseWrapper;W.prototype.status=null;W.prototype.callable=null;W.prototype.context=null;W.prototype.init=function(status,callable,context){this.status=U.NEString(status,null);this.callable=U.isCallable(callable)?callable:null;this.context=U.isObject(context)?context:null;return this};W.prototype.isValid=function(){return(this.status&&this.callable)?true:false};W.prototype.run=function(){return EFO.EFOPromise.apply(null,[this.context?this.context:this,this.callable].concat(Array.prototype.slice.call(arguments)))}
function addWrapper(pw){if(W.is(statusProcessors[pw.status]))U.ERR("Cant replace statusWrapper. RemoveOldFirst");statusProcessors[pw.status]=pw}
function AbstractProcessor(co,ca){return AbstractProcessor.is(this)?this.init(co,ca):AbstractProcessor.F(co,ca)};U.FixCon(AbstractProcessor);var AP=AbstractProcessor;AP.prototype.callable=null;AP.prototype.context=null;AP.prototype.init=function(co,ca){this.callable=U.isCallable(ca)?ca:U.isCallable(co)?co:null;this.context=U.isObject(co)?co:U.isObject(ca)?ca:null;return this};AP.prototype.run=function(){return this.runArray(Array.prototype.slice.call(arguments))};AP.prototype.runArray=function(args){if(this.isValid())try{this.callable.apply(this.context?this.context:this,U.safeArray(args))}catch(e){U.TError(e)};return this};AP.prototype.isValid=function(){return this.callable?true:false};AP.prototype.pushValid=function(stor){U.isArray(stor)&&this.isValid()?stor.push(this):false;return this}
function RequestOptions(){return RequestOptions.is(H)?H:RequestOptions.is(this)?this.init():RequestOptions.F()};U.FixCon(RequestOptions);var O=RequestOptions;O.prototype.cross=true;O.prototype.statusSection='status';O.prototype.errorSection='error';O.prototype.init=function(){H=this;return this};O.prototype.addWrapper=function(status,processorFunc,context){var wrapper=PromiseWrapper(status,processorFunc,context);wrapper&&wrapper.isValid()?addWrapper(wrapper):false;return this};O.prototype.hasWrapper=function(status){return status&&(status in statusProcessors)&&(PromiseWrapper.is(statusProcessors[status]))?true:false};O.prototype.removeWrapper=function(status){if(this.hasWrapper(status))delete(statusProcessors[status]);return this};O.prototype.runWrapper=function(status){var args=Array.prototype.slice.call(arguments,1);return statusProcessors[status].run.apply(statusProcessors[status],args)};O.prototype.registerPreprocessor=function(co,ca){AbstractProcessor(co,ca).pushValid(preprocessors);return this};O.prototype.registerPostprocessor=function(co,ca){AbstractProcessor(co,ca).pushValid(postprocessors);return this};RO=O
function Request(method,url,data){return Request.is(this)?this.init(method,url,data):Request.F(method,url,data)};U.normalizeConstructor(Request);var F=Request;F.prototype.promise=null;F.prototype.xhr=null;F.prototype.method=null;F.prototype.url=null;F.prototype.data=null;F.prototype._promiseSuccess=null;F.prototype._promiseFail=null;F.prototype.cross=false;F.prototype.init=function(method,url,data){this.method=/^post$/.test(method)?'POST':'GET';this.url=U.NEString(url,window.location.href);this.data=U.safeObject(data);this.cross=RO().cross;this.runProcessors(preprocessors,this);this.promise=EFO.EFOPromise(this,this._run);return this};F.prototype.runProcessors=function(ppl){var args=Array.prototype.slice.call(arguments,1);ppl=U.safeArray(ppl);for(var i=0;i<ppl.length;i++)ppl[i].runArray(args);return this};F.prototype._run=function(success,fail){this._promiseSuccess=success;this._promiseFail=fail;this.runRequest();return this};F.prototype.runRequest=function(){var xhc=("onload"in new XMLHttpRequest())?XMLHttpRequest:XDomainRequest;this.xhr=new xhc();this.xhr.open(this.method,this.method==='POST'?this.url:this.encodeUrl());this.xhr.onreadystatechange=this.onreadystatechange.bindToObject(this);this.method==='POST'?this.xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded'):false;this.xhr.withCredentials=this.cross;this.method==='POST'?this.xhr.send(this.encodeData()):this.xhr.send();return this};F.prototype.onreadystatechange=function(){if(this.xhr.readyState===4){try{if(this.xhr.status===200){var d=JSON.parse(this.xhr.responseText);if(U.isObject(d)){if(d[RO().statusSection]==='ok'){this.runProcessors(postprocessors,this,d);this._promiseSuccess(d);return this.clear()};if(RO().hasWrapper(d[RO().statusSection])){RO().runWrapper(d[RO().statusSection],d).done(this,this.repeat).fail(this,this.failStatus);this.xhr=null;return this}else if(d[RO().statusSection]==='error')throw new Error(d[RO().errorSection])};throw new Error("MailformedResponce")}else throw new Error("NetworkError")}catch(e){this._promiseFail(e)};return this.clear()};return this};F.prototype.repeat=function(){this.runProcessors(preprocessors,this);return this.runRequest()};F.prototype.failStatus=function(){this._promiseFail(new Error("UnknownResponceStatus"));return this};F.prototype.clear=function(){this.xhr=null;return this};F.prototype.encodeUrl=function(){var urlData=this.encode(this.data);return[this.url,urlData.length?(this.url.indexOf('?')<0?'?':'&'):'',urlData].join('')};F.prototype.encodeData=function(){return this.encode(this.data)};F.prototype.encode=function(element,key,list){var list=list||[];if(typeof element==='object'){for(var idx in element)this.encode(element[idx],key?key+'['+idx+']':idx,list)}else list.push(key+'='+encodeURIComponent(element));return list.join('&')};F.prototype.done=function(){this.promise.done.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.prototype.fail=function(){this.promise.fail.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.prototype.always=function(){this.promise.always.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.getRequestOptions=function(){return RO()};EFO.Request=F}})();
;/*========== INCLUDE @Com/ImageManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.ImageManager?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null
function ImageManager(){return ImageManager.is(H)?H:ImageManager.is(this)?this.init():ImageManager.F()};U.FixCon(ImageManager);var F=ImageManager;F.prototype.nodes=[];F.prototype.init=function(){H=this;this.nodes={};return this};F.prototype.install=function(tpl){if(!(tpl in this.nodes)){var node=document.createElement('div');node.style.display='none';node.innerHTML=EFO.TemplateManager().get(tpl);this.nodes[tpl]=node};this.getBody().appendChild(this.nodes[tpl]);return this};F.prototype.getBody=function(){if(!this.body){this.body=document.getElementsByTagName('body');this.body=this.body&&this.body.length?this.body[0]:document.documentElement};return this.body};F.prototype.uninstall=function(tpl){if(tpl in this.nodes)this.nodes[tpl].remove();return this};EFO.ImageManager=F}})();
;/*========== INCLUDE @Com/Com========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Com?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,c={},s={},j={},prefix='',head=null,postfix=".js"
function Com(){return Com.is(H)?H:Com.is(this)?this.init():Com.F()};U.normalizeConstructor(Com)
function getHead(){if(!head){head=document.getElementsByTagName('head');if(head&&head.length){head=head[0]}else{head=document.getElementsByTagName('body');if(head&&head.length){head=head[0]}else head=document.documentElement}};return head}
function findElement(tag,attr,val){var tags=document.getElementsByTagName(tag);for(var i=0;i<tags.length;i++)if(tags[i][attr]===val)return tags[i];return null}
function loadScript(succ,fail,url,id){var ps=findElement('script','src',url);if(ps){succ(ps,url,id)}else{var s=document.createElement('script');s.src=url;s.id=id;s.async=true;s.onload=function(){succ(s,url,id)};s.onerror=function(){fail(s,url,id)};getHead().appendChild(s)};return this}
function loadCom(cn,id){var R=EFO.Defer(),s=document.createElement('script');s.id=id;s.src=[prefix,cn,postfix].join('');s.async=true;s.onerror=function(){R.reject(new Error("LoadError"))};getHead().appendChild(s);return R}
function loadStyle(succ,fail,url,id){var ps=findElement('link','href',url);if(ps){succ(ps,url,id)}else{var s=document.createElement('link');s.href=url;s.rel="stylesheet";s.type="text/css";s.id=id;s.async=true;s.onload=function(){succ(s,url,id)};s.onerror=function(){fail(s,url,id)};getHead().appendChild(s)};return this};Com.prototype.LEM=null;Com.prototype.init=function(){H=this;this.LEM=EFO.Events.LEM();return this};Com.prototype.js=function(url){if(!(url in j)){var id=U.UID();j[url]=EFO.EFOPromise(this,loadScript,url,id).failAfter(this,function(tag,url,id){delete(j[url]);tag.remove()})};return j[url]};Com.prototype.css=function(url){if(!(url in s)){var id=U.UID();s[url]=EFO.EFOPromise(this,loadStyle,url).failAfter(this,function(tag,url,id){delete(s[url]);tag.remove()})};return s[url]};Com.prototype.load=function(cn){cn=this.prepareCn(cn);if(!(cn in c)){var id=U.UID();c[cn]=loadCom(cn,id).failAfter(this,function(){delete(c[cn])}).alwaysAfter(this,function(){try{document.getElementById(id).remove()}catch(e){}})};return c[cn]};Com.prototype.prepareCn=function(cn){cn=cn.replace(/\\/g,'.').replace(/\//g,'.').replace(/\.{2,}/g,'.');return cn.replace(/^\.{1,}/g,'').replace(/\.{1,}$/g,'')};Com.prototype.com=Com.prototype.load;Com.prototype.reportSuccess=function(FQCN,comObj){EFO.Defer.is(c[FQCN])?c[FQCN].resolve(comObj):c[FQCN]=EFO.Defer().resolve(comObj)};Com.prototype.reportFail=function(FQCN,error){EFO.Defer.is(c[FQCN])?c[FQCN].reject(U.safeError(error)):false};Com.prototype.reportBuilderFail=function(FQCN,error){EFO.Defer.is(c[FQCN])?c[FQCN].reject(U.safeError(error)):false};Com.prototype.setPrimaryUrl=function(x){prefix=x;return this};Com.prototype.setPostfix=function(x){postfix=x;return this};EFO.Com=Com}})();
;/*========== INCLUDE @Com/StyleDriver========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.StyleDriver?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,TP=null,storage={}
function getTP(){if(!TP){TP=document.getElementsByTagName('head');TP=TP&&TP.length?TP[0]:null;if(!TP){TP=document.getElementsByTagName('body');TP=TP&&TP.length?TP[0]:document.documentElement}};return TP}
function StorageObject(id,key,text){return StorageObject.is(this)?this.init(id,key,text):StorageObject.F(id,key,text)};U.FixCon(StorageObject);var SO=StorageObject;SO.prototype.id=null;SO.prototype.handle=null;SO.prototype.key=null;SO.prototype.init=function(id,key,text){this.key=U.NEString(key);this.id=id;U.isObject(text)?text=this.prepare(text):false;text=U.NEString(text);if(this.key&&text){this.handle=document.createElement('style');this.handle.innerHTML=text;this.handle.type="text/css";this.handle.id=[this.id,this.key].join('___')};return this};SO.prototype.isValid=function(){return this.handle?true:false};SO.prototype.install=function(){getTP().appendChild(this.handle);return this};SO.prototype.uninstall=function(){this.handle.remove();return this};SO.prototype.prepare=function(x){if(x&&U.isArray(x.k)&&U.NEString(x.c))return EFO.TemplateManager()._runpreparer(x.k,x.c);return'/*--- Invalid Style ---*/'}
function StorageElement(id,data){return StorageElement.is(this)?this.init(id,data):StorageElement.F(id,data)};U.FixCon(StorageElement);var SE=StorageElement;SE.prototype.items=null;SE.prototype.id=null;SE.prototype.init=function(id,data){this.id=U.NEString(id);this.items={};data=U.safeObject(data);for(var k in data)if(data.hasOwnProperty(k)){var so=SO(this.id,k,data[k]);so&&so.isValid()?this.items[so.key]=so:false};return this};SE.prototype.isValid=function(){return this.id?true:false};SE.prototype.installAll=function(){for(var k in this.items)SO.is(this.items[k])?this.items[k].install():false;return this};SE.prototype.uninstallAll=function(){for(var k in this.items)SO.is(this.items[k])?this.items[k].uninstall():false;return this};SE.prototype.getElement=function(key){return(key in this.items)&&SO.is(this.items[key])?this.items[key]:null};SE.prototype.install=function(key){var s=this.getElement(key);s?s.install():false;return this};SE.prototype.uninstall=function(key){var s=this.getElement(key);s?s.uninstall():false;return this}
function StyleDriver(){return StyleDriver.is(H)?H:StyleDriver.is(this)?this.init():StyleDriver.F()};U.FixCon(StyleDriver);var F=StyleDriver;F.prototype.init=function(){H=this;return this};F.prototype.setStyles=function(id,data){var Z=SE(id,data);Z&&Z.isValid()?storage[Z.id]=Z:false;return this};F.prototype.getElement=function(id){return id&&(id in storage)&&SE.is(storage[id])?storage[id]:null};F.prototype.installStyles=function(id){var s=this.getElement(id);s?s.installAll():false;return this};F.prototype.uninstallStyles=function(id){var s=this.getElement(id);s?s.uninstallAll():false;return this};F.prototype.install=function(id,key){var s=this.getElement(id);s?s.install(key):false;return this};F.prototype.uninstall=function(id,key){var s=this.getElement(id);s?s.uninstall(key):false;return this};EFO.StyleDriver=F}})();
;/*========== INCLUDE @LD/LDriver2========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.LDriver2?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,LD=null,skey='',def='',keepKey='',autoProp=null,loadUrl=null,reportUrl=null,file=null,listUrl=null,ldefer=null,rps=null
function LDriver2(){return LDriver2.is(H)?H:LDriver2.is(this)?this.init():LDriver2.F()};U.FixCon(LDriver2);var F=LDriver2;F.prototype.init=function(){H=this;this.loadStatic();this.overridePrototypes();this.updateElement();return this};F.prototype.overridePrototypes=function(){Object.defineProperty(Object.prototype,'_T',{enumerable:false,configurable:false,writeable:false,value:function(x){return H.T(x)}});Object.defineProperty(Object.prototype,'_TT',{enumerable:false,configurable:false,writeable:false,value:function(){return function(a,b){return H.T(b(a))}}})};F.prototype.setElement=function(x){this.element=x;if(this.isLoaded())this.updateElement();return this};F.prototype.updateElement=function(){this.element?this.element.innerHTML=LD.ln:false;return this};F.prototype.T=function(x){if(LD){if(LD.tokens.hasOwnProperty(x))return LD.tokens[x];LD.tokens[x]=x;this.report(x)};return x};F.prototype.report=function(x){window.clearTimeout(this.SRTO);(rps=U.safeArray(rps)).push(x);this.SRTO=window.setTimeout(this._sendData.bindToObject(this),1e4);return this};F.prototype._sendData=function(){window.clearTimeout(this.SRTO);var a=[].concat(U.safeArray(rps));rps=null;if(reportUrl&&a.length)EFO.Request('post',reportUrl,{ln:this.getCurrent(),file:file,tokens:a}).done(this,function(){this._update()});return this};F.prototype.setSKey=function(x){skey=U.NEString(x);return this};F.prototype.setDefault=function(x){def=U.NEString(x);return this};F.prototype.setAutoProp=function(x){autoProp=U.NEString(x);return this};F.prototype.setLoadUrl=function(x){loadUrl=U.NEString(x);return this};F.prototype.setReportUrl=function(x){reportUrl=U.NEString(x);return this};F.prototype.setFile=function(x){file=U.NEString(x);return this};F.prototype.setKeepKey=function(x){keepKey=U.NEString(x);return this};F.prototype.setListUrl=function(x){listUrl=U.NEString(x);return this};F.prototype.ready=function(){ldefer?false:ldefer=EFO.Defer();return ldefer};F.prototype.getCurrent=function(deflt){deflt=U.defined(deflt)?deflt:def;return U.NEString(localStorage.getItem(skey),deflt)};F.prototype.isSelected=function(){return this.getCurrent(null)?true:false};F.prototype.isLoaded=function(){return LD?true:false};F.prototype.setCurrent=function(x){localStorage.setItem(skey,x);localStorage.removeItem(keepKey);this.reloadPage()};F.prototype.loadStatic=function(){try{var lo=JSON.parse(localStorage.getItem(keepKey));U.isObject(lo)?false:lo=null;if(U.isObject(lo))if(this.checkObject(lo)&&lo.ln===this.getCurrent()){LD=lo;return this.updateElement()}}catch(e){};return this};F.prototype.getLoadUrl=function(){if(loadUrl&&file&&this.getCurrent())return[loadUrl,file,'_',this.getCurrent(),'.json'].join('');return null};F.prototype.loadRemote=function(){ldefer=new EFO.Defer();var url=this.getLoadUrl();if(url){EFO.Request('GET',url).done(this,this.onLoadRemote).fail(this,this.loadRemoteFail)}else U.TError("NoLoadUrl");return this};F.prototype.onLoadRemote=function(d){LD=this.checkObject(d.d)?d.d:null;if(LD){localStorage.setItem(skey,LD.ln);localStorage.setItem(keepKey,JSON.stringify(LD));this.setLastUpdated().updateElement()}else return this.loadRemoteFail();this.ready().resolve(this);return this};F.prototype.checkObject=function(x){if(U.isObject(x))if(U.NEString(x.ln)&&U.isObject(x.tokens)||U.isArray(x.tokens)&&!x.tokens.length){x.tokens=U.safeObject(x.tokens);return true};return false};F.prototype.loadRemoteFail=function(){localStorage.removeItem(skey);localStorage.removeItem(keepKey);return this.reloadPage()};F.prototype.reloadPage=function(){location.reload();return this};F.prototype.checkUpdates=function(){if(this.updateRequired()){window.clearTimeout(this.UPTOID);this.UPTOID=window.setTimeout(this._update.bindToObject(this),2e4)};return this};F.prototype.updateRequired=function(){var LS=this.getLastUpdated(),NS=this.getNowState();return(NS-LS)>(60*60*24*1e3)};F.prototype.getLastUpdated=function(){return U.IntMoreOr(localStorage.getItem('ldriverv2_u'),0,0)};F.prototype.setLastUpdated=function(){localStorage.setItem('ldriverv2_u',this.getNowState());return this};F.prototype.getNowState=function(){return(new Date()).getTime()};F.prototype._update=function(){var R=EFO.Defer(),url=this.getLoadUrl();if(url){EFO.Request('get',url).done(this,function(d){if(U.isObject(d)&&this.checkObject(d.d)){for(var k in d.d.tokens)if(d.d.tokens.hasOwnProperty(k))LD.tokens[k]=d.d.tokens[k];for(var k in LD.tokens)if(!(k in d.d.tokens))delete(LD.tokens[k]);localStorage.setItem(keepKey,JSON.stringify(LD));this.setLastUpdated();this.updateElement();this.updateNodes();R.resolve(this)};R.reject()}).fail(this,function(){R.reject()})}else R.reject();return R};F.prototype.updateNodes=function(x){if(autoProp){x=x?x:document.documentElement;if(x.dataset&&x.dataset[autoProp]){x.innerHTML=this.T(x.dataset[autoProp])}else if(x.children&&x.children.length)for(var i=0;i<x.children.length;i++)this.updateNodes(x.children[i])};return this};F.prototype.getList=function(){if(listUrl)return EFO.Request('get',listUrl);U.TError("noListUrl");return EFO.Defer().reject()};EFO.LDriver2=F}})();
;/*========== INCLUDE @LD/LangMonitor========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.LangMonitor?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null
function LangMonitor(){return LangMonitor.is(H)?H:LangMonitor.is(this)?this.init():LangMonitor.F()};U.FixCon(LangMonitor);var F=LangMonitor;F.prototype.current=null;F.prototype.init=function(){H=this;this.current=U.NEString(localStorage.getItem('content_ln'),'ru');this.setCookie();return this};F.prototype.setCookie=function(){var options={path:"/"},expires=1e5;if(typeof expires=="number"&&expires){var d=new Date();d.setTime(d.getTime()+expires*1e3);expires=options.expires=d};if(expires&&expires.toUTCString)options.expires=expires.toUTCString();var value=encodeURIComponent(this.current),updatedCookie='content_ln'+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];if(propValue!==true)updatedCookie+="="+propValue};document.cookie=updatedCookie;return this};F.prototype.setElement=function(x){this.element=x;try{this.element.removeEventListener('click',this.onClick.bindToObject(this));this.element.addEventListener('click',this.onClick.bindToObject(this))}catch(e){};return this.updateElement()};F.prototype.updateElement=function(){if(this.element)this.element.innerHTML=this.current;return this};F.prototype.setCurrent=function(x){this.current=x;localStorage.setItem('content_ln',this.current);this.updateElement();this.setCookie();window.location.reload(true);return this};F.prototype.onClick=function(){EFO.Com().com('selector.language').done(this,this.onSelectorReady).fail(this,this.onSelectorError);return this};F.prototype.onSelectorReady=function(x){x.show().setAllowCancel(true).setReturnResult(true).setCallback(this,this.onSelected);return this};F.prototype.onSelectorError=function(x){U.TError(U.isError(x.message)?x:U.NEString(x)?x:"RequiredComponentFail");return this};F.prototype.onSelected=function(li){this.setCurrent(li);return this};window.Eve.EFO.LangMonitor=F}})();
;/*========== INCLUDE Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.Filter?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,instances=null,FN=EFO.Filter
function iapplyChain(value,filters){var out=value;for(var i=0;i<filters.length;i++)out=this.applyFilter(out,filters[i]);return out}
function iapplyHash(input,filters){var o={};filters.each(this,function(fi){fi.applyTo(input,o)});return o}
function Filter(){return Filter.is(H)?H:(Filter.is(this)?this.init():Filter.F())};U.FixCon(Filter);var F=Filter;F.prototype.init=function(){H=this;instances={};return this};F.prototype.getInstance=function(x){return FN.FilterManager().get(x)};F.prototype.applyFilter=function(value,filter){var fo=this.getInstance(filter);fo?false:U.Error(["NoFilter`",filter,"`"].join(''));return fo.apply(value)};F.prototype.applyChain=function(value,filters){var fa=U.mkArray(filters,false,',');fa.length?false:U.Error("FilterChainIsEmpty");return iapplyChain.apply(this,[value,fa])};F.prototype.applyFiltersToHash=function(input,filters){input=U.isObject(input)?input:null;if(input){var fdef=this.getFilterDefiner(filters);return iapplyHash.apply(this,[input,fdef])};return null};F.prototype.applyFiltersToArray=function(input,filters,skipBad){skipBad=U.anyBool(skipBad,false);input=U.safeArray(input);var o=[];if(input.length){filters=U.mkArray(filters,false,',');var value=iapplyChain.apply(this,[value,filters]);(this.isValueValid(value)||!skipBad)?o.push(value):false};return o};F.prototype.applyFiltersToArrayOfHash=function(input,filters){input=U.safeArray(input);var out=[],fdef=this.getFilterDefiner(filters);for(var i=0;i<input.length;i++)if(U.isObject(input[i]))out.push(iapplyHash.aplly(this,input[i],fdef));return out};F.prototype.getFilterDefiner=function(x){return FN.FilterDefineFactory()(x)};F.prototype.isValid=function(x){return!FN.Values().BadValue.is(x)};F.prototype.isBad=function(x){return FN.Values().BadValue.is(x)};F.prototype.throwValuesErrors=function(x,tt,prefix){var c=0;prefix=U.NEString(prefix,'');if(U.isObject(x)){for(var k in x)if(x.hasOwnProperty(k))if(this.isBad(x[k])){c++;U.TError([prefix,"Filter fails on ",k,": ",x[k].getError()].join(''))}}else U.Error("ThrowValuesErrors requires an object");U.NEString(tt)&&c?U.Error(prefix+tt):false;return this};F.prototype.throwValuesError=function(x,tt,prefix){var c=0;prefix=U.NEString(prefix,'');if(U.isObject(x)){for(var k in x)if(x.hasOwnProperty(k))if(this.isBad(x[k])){c++;U.Error([prefix,"Filter fails on ",k,": ",x[k].getError()].join(''))}}else U.Error("ThrowValuesErrors requires an object");U.NEString(tt)&&c?U.Error(prefix+tt):false;return this};FN.Filter=F}})();
;/*========== INCLUDE FilterDefine.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.FilterDefineFactory?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null;FN.FilterDefineFactory=function(){if(R)return R
function FilterDefine(x){return FilterDefine.is(x)?x:(FilterDefine.is(this)?this.init(x):FilterDefine.F(x))};U.FixCon(FilterDefine);var F=R=FilterDefine;F.prototype.defs;F.prototype.init=function(x){this.defs=[];if(typeof x==='string'){return this.initFromString(x)}else if(U.isObject(x)){return this.initFromObject(x)}else if(U.isArray(x)){return this.initFromArray(x)}else if(window.DOMParser&&window.XMLDocument&&(x instanceof XMLDocument))return this.initXMLDoc(x);U.Error("CantInitFilterDefine")};F.prototype.initFromString=function(x){if(window.DOMParser){var doc=(new DOMParser()).parseFromString(x,"text/xml");if(doc&&(doc instanceof XMLDocument)){var e=doc.getElementsByTagName('parsererror');if(!e||e.length===0)return this.initXMLDoc(doc)}};try{var jso=JSON.parse(x);if(U.isObject(jso))return this.initFromObject(jso);if(U.isArray(jso))return this.initFromArray(jso)}catch(e){};var fd=x.split(';'),o=[];for(var i=0;i<fd.length;i++){var fdo=this.tryParseCSVElement(fd[i]);fdo?o.push(fdo):false};if(o.length)return this.initFromArray(o);U.Error("NoCompatibleFormatFoundForFilterString")};F.prototype.tryParseCSVElement=function(x){var xa=x.split(':');if(xa.length===2){var fns=xa[1].split(',');if(fns.length)return{inName:xa[0],filters:fns}};return null};F.prototype.initFromArray=function(x){x=U.safeArray(x);if(x.length){for(var i=0;i<x.length;i++){var t=U.safeObject(x[i]),def=Q(t.inName,t.outName,t.filters);def&&def.isValid()?this.defs.push(def):U.Error("IncorrectFilterDefinition")};return this};U.Error("FilterDefine:initFromArray fails:emptyArray/notArray")};F.prototype.initFromObject=function(x){x=U.safeObject(x);var o=[];for(var k in x)if(x.hasOwnProperty(k))if(typeof(x[k])==='string'){o.push({inName:k,filters:x[k]})}else if(U.isArray(x[k])){x[k].length?o.push({inName:k,filters:[].concat(x[k])}):U.Error("cantParse: filtersArrayisEmpty on key "+k)}else if(U.isObject(x[k])){o.push({inName:k,outName:x[k].outName,filters:x[k].filters})}else U.Error("Cant parse input object:key "+k);return this.initFromArray(o)};F.prototype.initXMLDoc=function(x){var r=[],props=x.getElementsByTagName('property');if(props&&props.length)for(var i=0;i<props.length;i++)r.push(this.initXMLProp(props[i]));return this.initFromArray(r)};F.prototype.initXMLProp=function(propNode){var iname=U.NEString(propNode.getAttribute('in')),oname=propNode.hasAttribute('out')?U.NEString(propNode.getAttribute('out')):void(0),filters=[];propNode.hasAttribute('filters')?filters.push(propNode.getAttribute('filters')):false;var fe=propNode.getElementsByTagName('filter');if(fe&&fe.length)for(var i=0;i<fe.length;i++)if(fe[i].childNodes&&fe[i].childNodes.length&&(fe[i].childNodes[0]instanceof Text))filters.push(fe[i].childNodes[0].nodeValue);return{inName:iname,outName:oname,filters:filters}};F.prototype.each=function(co,ca){if(U.isCallable(ca)){co=U.isObject(co)?co:this;for(var i=0;i<this.defs.length;i++)ca.apply(co,[this.defs[i],i])};return this}
function FilterDef(inName,outName,filters){return FilterDef.is(this)?this.init(inName,outName,filters):FilterDef.F(inName,outName,filters)};U.FixCon(FilterDef);var Q=FilterDef;Q.prototype.inName=null;Q.prototype.outName=null;Q.prototype.filters=null;Q.prototype.init=function(iname,oname,filters){iname=U.NEString(iname);oname=U.NEString(oname);filters=this.prepareFilters(filters);this.inName=iname?iname:U.Error("FilterDef error:no inName");this.outName=oname?oname:iname;this.filters=filters&&filters.length?filters:U.Error("FilterDef error: no filters");return this};Q.prototype.prepareFilters=function(x){x=U.mkArray(x,false);var fns=[];for(var i=0;i<x.length;i++)fns=fns.concat(U.mkArray(x[i],false));if(fns&&fns.length){var filters=[],FM=FN.FilterManager();for(var i=0;i<fns.length;i++)filters.push(FM.get(fns[i]));return filters};return null};Q.prototype.each=function(co,ca){if(U.isCallable(ca)){co=U.isObject(co)?co:this;for(var i=0;i<this.filters.length;i++)ca.apply(co,[this.filters[i],i])};return this};Q.prototype.extract=function(x){return(U.isObject(x)&&U.defined(x[this.inName]))?x[this.inName]:FN.FilterManage().emptyValue()};Q.prototype.applyTo=function(x,o){var val=x[this.inName];for(var i=0;i<this.filters.length;i++)val=this.filters[i].apply(val);o[this.outName]=val};Q.prototype.isValid=function(){return this.inName&&this.outName&&this.filters&&this.filters.length?true:false};return R}}})();
;/*========== INCLUDE FilterManager.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.FilterManager?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,instances=null,FN=EFO.Filter
function FilterManager(){return FilterManager.is(H)?H:(FilterManager.is(this)?this.init():FilterManager.F())};U.FixCon(FilterManager);var F=FilterManager;F.prototype.values=null;F.prototype.init=function(){H=this;instances={};this.values=FN.Values();return this};F.prototype.getEmptyValue=function(){return this.values.EmptyValue()};F.prototype.getInvalidValue=function(err){return this.values.InvalidValue(err)};F.prototype.isBadValue=function(x){return this.values.BadValue.is(x)};F.prototype.instanceExists=function(x){return FN.AbstractFilter.is(instances[x])};F.prototype.get=function(x){if(!this.instanceExists(x))instances[x]=this.createInstance(x);return instances[x]};F.prototype.createInstance=function(x){var FC=FN.AbstractFilter.Factory(x);return U.isCallable(FC)?FC():U.Error("NonFilter:"+x)};FN.FilterManager=F}})();
;/*========== INCLUDE AbstractDefaultFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="AbstractDefault";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){U.AbstractError()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.apply=function(value){if(FN.Values().BadValue.is(value))return this.getDefaultValue();return value};F.prototype.getDefaultValue=function(){return"Override"};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE AbstractFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};window.Eve.EFO.Filter.AbstractFilter?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,FF=FN.factory
function AbstractFilter(){U.AbstractError()};U.FixCon(AbstractFilter);var F=AbstractFilter;F.prototype.init=function(){return this};F.prototype.apply=function(value){if(FN.Values().BadValue.is(value))return value;return U.defined(value)?this.applyFilter(value):this.getEmptyValue()};F.prototype.getEmptyValue=function(){return FN.Values().EmptyValue()};F.prototype.getInvalidValue=function(x){return FN.Values().InvalidValue(x)};F.prototype.applyFilter=function(x){U.AbstractError};FN.AbstractFilter=F;F.Factory=function(x){var fn=[U.UCFirst(x),'FilterFactory'].join('');if(U.isCallable(FF[fn])){var fc=FF[fn]();if(U.isCallable(fc)&&F.prototype.isPrototypeOf(fc.prototype))return fc;U.Error(["Filter constructor must inherit AbstractFilter (",x,")"].join(''))};U.Error(["Cant find factory for filter ",x].join(''))}}})();
;/*========== INCLUDE BooleanFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Boolean";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var r=U.anyBool(x,null);return r===null?this.getInvalidValue("NonBool"):r};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultFalseFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultFalse";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return false};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultNullFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultNull";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return null};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultTrueFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultTrue";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return true};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE EmailMatchFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="EmailMatch";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return EFO.Checks.isEmail(x)?x:this.getInvalidValue("NotEmail")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE IntMore0Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="IntMore0";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var t=U.IntMoreOr(x,0,null);return t===null?this.getInvalidValue("IntMore0"):t};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE NEStringFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="NEString";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var y=U.NEString(x);return y?y:this.getInvalidValue('NEString')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE PasswordMatchFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="PasswordMatch";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return/[a-z0-9]{6,}/i.test(x)?x:this.getInvalidValue("BadPassword")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE RequiredTrueFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="RequiredTrue";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return x===true?x:this.getInvalidValue("RequiredTrue")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE StripFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Strip";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){try{return x.replace(/<\/?[^>]+>/gi,'')}catch(ex){};return this.getInvalidValue('NonString')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE TrimFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Trim";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return U.NEString(x,'')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE UpperCaseFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="UpperCase";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){try{return x.toUpperCase()}catch(e){};return this.getInvalidValue("Not-a-String")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE Values.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.Values?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,FN=EFO.Filter,R=null
function ValuesFactory(){if(R)return R
function BadValue(){U.AbstractError()};U.FixCon(BadValue);BadValue.prototype.getError=function(){return"abstractBadValue"}
function EmptyValue(){return EmptyValue.is(H)?H:(EmptyValue.is(this)?this.init():EmptyValue.F())};EmptyValue.xInheritE(BadValue);EmptyValue.prototype.init=function(){H=this;return this};EmptyValue.prototype.getError=function(){return"ValueIsEmpty"}
function InvalidValue(errVal){return InvalidValue.is(this)?this.init(errVal):InvalidValue.F(errVal)};InvalidValue.xInheritE(BadValue);InvalidValue.prototype.err=null;InvalidValue.prototype.init=function(err){this.err=err;return this};InvalidValue.prototype.getError=function(){return["ValueIsInvalid:",this.err].join('')};R={BadValue:BadValue,EmptyValue:EmptyValue,InvalidValue:InvalidValue};return R};FN.Values=ValuesFactory}})();
;/*========== INCLUDE @AuthCheck/AuthCheck========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.AuthCheck?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null
function AuthCheck(eo,th){return AuthCheck.is(H)?H.run(eo,th):AuthCheck.is(this)?this.init(eo,th):AuthCheck.F(eo,th)};U.FixCon(AuthCheck);var F=AuthCheck;F.prototype.t=null;F.prototype.init=function(eo,th){H=this;this.t=[];return this.registerEvents().run(eo,th)};F.prototype.registerEvents=function(){EFO.Events.GEM().On('LOGIN_SUCCESS',this,this.onAuthSuccess);return this};F.prototype.run=function(eo,th){if(this.checkError(eo)){this.t.push(th);this.runLogin()};return this};F.prototype.runLogin=function(){EFO.Com().com('DAP.login').done(function(x){x.show()}).fail(function(){U.TError(this._T("RequiredComponentFail"))});return this};F.prototype.onAuthSuccess=function(){var ee=this.t;this.t=[];for(var i=0;i<ee.length;i++)ee[i].table.body.DataDriver.refresh();return this};F.prototype.checkError=function(x){if(U.isObject(x)&&U.isObject(x.responce)&&x.responce.s==='AuthRqrd')return true;return false};EFO.AuthCheck=F}})();
;/*========== INCLUDE @Utils/Ready========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};var E=window.Eve,EFO=E.EFO,U=EFO.U,c=[].concat(U.safeArray(window.Eve.EFO.Ready));EFO.Ready={push:function(x){if(U.isCallable(x))try{x()}catch(e){U.TError(e.message)}}};for(var i=0;i<c.length;i++)EFO.Ready.push(c[i])})();
/*=====INCLUDE TEMPLATES: =======*/;
window.Eve.EFO.TemplateManager().addObject({"Handlable.default":"{{=<% %>=}}{{getContent}}<%={{ }}=%>","Paginator.Content":"<div class=\"{{getCssClass}}Content\" data-role=\"items\">sddd<\/div>","Paginator.default":"{{=<% %>=}}<div class=\"<%getCssClass%>\" id=\"<%_uid%>\"><%{getContentTemplate}%><\/div><%={{ }}=%>","Paginator.item":"{{#separator}}<span class=\"{{getCssClass}}Element {{getCssClass}}Separator\" >{{text}}<\/span>{{\/separator}}{{^separator}}<span class=\"{{getCssClass}}Element {{#current}} {{getCssClass}}Current {{\/current}}\" data-page=\"{{i}}\" data-command=\"setPage\">{{text}}<\/span>{{\/separator}}","Paginator.items":"<span class=\"{{getCssClass}}HBtn {{getCssClass}}Prev  {{^hasPrev}} disabled {{\/hasPrev}}\" data-command=\"prevPage\"><\/span>{{#items}}{{>item}}{{\/items}}<span class=\"{{getCssClass}}HBtn {{getCssClass}}Next  {{^hasNext}} disabled {{\/hasNext}}\" data-command=\"nextPage\"><\/span>\n","TreeView.Content":"<div class=\"{{getCssClass}}Content\" data-role=\"items\">TreeView<\/div>","TreeView.Toolbar":"<div class=\"{{getCssClass}}Toolbar\" data-role=\"toolbar\">\n    {{#getCommandButtons}}\n    <div class=\"{{getCssClass}}CommandButton {{getCssClass}}Custom{{css}}\" data-command=\"{{command}}\">\n        <svg><use xlink:href=\"#{{getCssClass}}ButtonImage{{image}}\" \/><\/svg>\n    <\/div>\n    {{\/getCommandButtons}}        \n<\/div>","TreeView.default":"{{=<% %>=}}\n<div class=\"<%getCssClass%> <%#enableToolbar%><%getCssClass%>ToolbarEnabled<%\/enableToolbar%>\" id=\"<%_uid%>\">\n    <%#enableToolbar%><%{getToolbarTemplate}%><%\/enableToolbar%>\n    <%{getContentTemplate}%>\n    <div class=\"EFOWindowLoader {{getCssClass}}WindowLoader\" data-role=\"loader\" style=\"display:none;\"><\/div>\n<\/div>\n<%={{ }}=%>","TreeView.node":"{{#childs}}\n<div class=\"{{getCssClass}}NodeElement {{getCssClass}}NodeElementCustom{{css}} {{getCssClass}}NodeElementParent{{#hasChilds}}hasChilds{{\/hasChilds}}{{^hasChilds}}NoChilds{{\/hasChilds}} {{getCssClass}}NodeElementState{{#opened}}opened{{\/opened}}{{^opened}}closed{{\/opened}}\" data-id=\"{{id}}\" data-key=\"{{key}}\">\n    <div class=\"{{getCssClass}}NodeElementName {{#getIsDraggableBinded}}EFODraggable EFODropTarget{{\/getIsDraggableBinded}}\" {{#getIsDraggableBinded}}data-efodragtype=\"{{getDragTypeBinded}}\" data-efodroptypes=\"{{getDragTargetBinded}}\"{{\/getIsDraggableBinded}} data-node-element=\"itemHeader\">\n        <span class=\"{{getCssClass}}NodeElementIcon {{getCssClass}}NodeIconCollapsed\" data-node-element=\"itemIcon\"><svg><use xlink:href=\"#{{getCssClass}}Icon{{icon}}Collapsed\"\/><\/svg><\/span>\n        <span class=\"{{getCssClass}}NodeElementIcon {{getCssClass}}NodeIconExpanded\" data-node-element=\"itemIcon\"><svg><use xlink:href=\"#{{getCssClass}}Icon{{icon}}Expanded\"\/><\/svg><\/span>\n        <span class=\"{{getCssClass}}NodeElementText\">{{name}}<\/span>\n    <\/div>\n    {{#hasChilds}}\n    <div class=\"{{getCssClass}}NodeElementNodeBody\">\n        {{>element}}\n    <\/div>\n    {{\/hasChilds}}\n<\/div>\n{{\/childs}}","contextMenu.Content":"<div class=\"{{getCssClass}}Content\" data-role=\"items\">sddd<\/div>","contextMenu.default":"{{=<% %>=}}<div class=\"<%getCssClass%>\" id=\"<%_uid%>\"><%{getContentTemplate}%><\/div><%={{ }}=%>","contextMenu.items":"<ul class=\"{{getCssClass}}List {{getCssClass}}Custom{{customClass}}\">\n    {{#items}}\n    <li data-command=\"{{command}}\" >\n        <span class=\"{{getCssClassBind}}ItemIcon\"><svg><use xlink:href=\"#{{getCssClassBind}}{{customClass}}Icon{{icon}}\" \/><\/svg><\/span>\n        <span class=\"{{getCssClassBind}}ItemText\">{{title}}<\/span>\n    <\/li>\n    {{\/items}}\n<\/ul>","draghelper":"<div class=\"EFODragHelper\" style=\"display:none\">    \n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" width=\"512px\" version=\"1.1\" height=\"512px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\">\n        <g>\n            <path  d=\"m63.875,31.203c-0.102-0.246-0.248-0.467-0.435-0.652l-6.837-6.838c-0.783-0.783-2.051-0.783-2.834,0-0.781,0.781-0.781,2.05 0,2.832l3.42,3.42-23.16-.001 .002-23.155 3.568,3.57c0.393,0.392 0.904,0.588 1.418,0.588 0.512,0 1.025-0.196 1.416-0.588 0.783-0.781 0.783-2.051 0-2.834l-6.988-6.99c-0.186-0.186-0.406-0.332-0.652-0.434-0.49-0.203-1.041-0.203-1.531,0-0.244,0.101-0.463,0.246-0.646,0.429 0,0-0.002,0.002-0.004,0.003l-6.844,6.84c-0.781,0.783-0.781,2.051 0,2.834 0.393,0.391 0.904,0.587 1.418,0.587 0.512,0 1.025-0.196 1.416-0.587l3.422-3.42-.002,23.157-23.15-.001 3.417-3.418c0.781-0.782 0.781-2.051 0-2.832-0.783-0.783-2.051-0.783-2.834,0l-6.838,6.84c-0.393,0.391-0.588,0.903-0.588,1.416s0.195,1.025 0.588,1.417l6.988,6.989c0.392,0.393 0.904,0.588 1.417,0.588s1.025-0.195 1.417-0.588c0.782-0.783 0.782-2.051 0-2.833l-3.571-3.571 23.153,.001-.001,23.153-3.418-3.417c-0.783-0.78-2.051-0.782-2.834,0.001-0.781,0.783-0.781,2.052 0,2.834l6.844,6.839c0.391,0.392 0.904,0.587 1.416,0.587 0.513,0 1.025-0.195 1.416-0.587l6.99-6.991c0.783-0.783 0.783-2.053 0-2.834-0.783-0.783-2.051-0.783-2.834,0l-3.572,3.574 .002-23.159 23.16,.001-3.57,3.569c-0.781,0.782-0.781,2.05 0,2.833 0.393,0.393 0.904,0.588 1.418,0.588 0.512,0 1.025-0.195 1.416-0.588l6.989-6.989c0.004-0.005 0.006-0.012 0.012-0.017 0.177-0.182 0.321-0.396 0.421-0.633 0.102-0.246 0.154-0.506 0.154-0.768-0.001-0.259-0.053-0.52-0.155-0.765z\"\/>\n        <\/g>\n    <\/svg>\n<\/div>","flatController.default":"{{=<% %>=}}\n<div class=\"EFOFlatControllerWraper FlatController<%getCssClass%>Wrapper\" id=\"EFOController<%getControllerId%>\">\n    <div class=\"EFOWindowContent <%getCssClass%>WindowContent\" data-role=\"windowContent\">\n        <%{getContentTemplate}%>\n    <\/div>        \n    <div class=\"EFOWindowLoader <%getCssClass%>WindowLoader\" data-role=\"loader\"><\/div>\n<\/div>\n<%={{ }}=%>","windowController.default":"{{=<% %>=}}\n<div class=\"EFOBackdrop <%getCssClass%>Backdrop\" id=\"EFOController<%getControllerId%>\">    \n    <div class=\"EFOWindow <%getCssClass%>Window\" data-role=\"window\">\n        <% > WindowControllerTitle %>\n        <div class=\"EFOWindowContent <%getCssClass%>WindowContent\" data-role=\"windowContent\">\n            <%{getContentTemplate}%>\n        <\/div>\n        <% > WindowControllerFooter %>     \n        <div class=\"EFOWindowLoader <%getCssClass%>WindowLoader\" data-role=\"loader\"><\/div>\n    <\/div>\n<\/div>\n<%={{ }}=%>","windowController.footer":"{{=<% %>=}}\n<div class=\"EFOFooter <%getCssClass%>Footer\">\n    <%#getFooterButtons%>\n    <%> WindowControllerFooterButton%>\n    <%\/getFooterButtons%>\n    <div class=\"EFOWindowResizer <%getCssClass%>WindowResizer\" data-role=\"resizer\"><\/div>\n<\/div>\n<%={{ }}=%>","windowController.footerButton":"{{=<% %>=}}\n<span class=\"EFOFooterButton <%getCssClass%>FooterButton <%buttonClass%>\" data-command=\"<%command%>\"><%text%><\/span>\n<%={{ }}=%>","windowController.title":"{{=<% %>=}}\n<div class=\"EFOTitle <%getCssClass%>Title\">\n    <span class=\"EFOTitleText <%getCssClass%>TitleText\" data-role=\"titleText\">{{getDefaultTitle}}<\/span>\n    <div class=\"EFOTitleClose <%getCssClass%>Close\" data-command=\"cancel\"><\/div>\n<\/div>\n<%={{ }}=%>"});;
/*=====18 TEMPLATES ARE INCLUDED =======*/